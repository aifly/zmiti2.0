(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{621:function(t,i,a){var e=a(622);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,a(6).default)("68133d4d",e,!1,{})},622:function(t,i,a){(t.exports=a(4)()).push([t.i,"\n.ql-container {\r\n  min-height: 200px;\n}\n.ql-snow {\r\n  line-height: 24px !important;\n}\n.edit_container {\r\n  background: #ffffff;\n}\r\n",""])},623:function(t,i,a){var e=a(624);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,a(6).default)("d5abf450",e,!1,{})},624:function(t,i,a){(t.exports=a(4)()).push([t.i,"\n.zmiti-partydetail-main-ui[data-v-7a26d039]{background:#f2f2f2;box-sizing:border-box;height:100%;width:99%;margin:0 auto\n}\n.zmiti-partydetail-main-ui .zmiti-list-main[data-v-7a26d039]{box-sizing:border-box;background:#fff;margin:0 auto\n}\n.zmiti-partydetail-main-ui .zmiti-list-where[data-v-7a26d039]{font-size:14px;width:98%;margin:0 auto 10px auto;display:flex;display:-webkit-flex;flex-flow:row\n}\n.zmiti-partydetail-main-ui .zmiti-list-where .zmiti-search-dates[data-v-7a26d039]{margin:0 10px\n}\n.zmiti-partydetail-main-ui .zmiti-list-where .zmiti-search-input[data-v-7a26d039]{margin:0 10px\n}\n.zmiti-partydetail-main-ui .zmiti-search-icon[data-v-7a26d039]{font-size:20px;cursor:pointer\n}\n.zmiti-partydetail-main-ui .zmiti-tabs-select[data-v-7a26d039]{width:98%;margin:0 auto\n}\n.zmiti-partydetail-main-ui .zmiti-submit-main[data-v-7a26d039]{margin-top:10px;flex:5;-webkit-flex:5;width:100%\n}\n.zmiti-partydetail-main-ui .zmiti-submit-main>div[data-v-7a26d039]{-webkit-transition:.3s;transition:.3s\n}\n.zmiti-partydetail-main-ui .zmiti-submit-main .zmiti-submit-table[data-v-7a26d039]{width:98%;margin:0 auto\n}\n.zmiti-add-form[data-v-7a26d039]{flex:1;-webkit-flex:1;width:500px;overflow:auto;position:absolute !important;top:0;right:0;z-index:100;height:100%;position:relative;box-shadow:0 0 0 1px #ccc;box-sizing:border-box;background:#f9f9f9\n}\n.zmiti-add-form .zmiti-safe-content[data-v-7a26d039]{display:flex;display:-webkit-flex;flex-flow:row;-webkit-align-items:center;align-items:center;margin-top:30px;justify-content:space-around;-webkit-justify-content:space-around;border:1px dashed #ccc;padding:10px 0\n}\n.zmiti-add-form .zmiti-safe-content>div[data-v-7a26d039]:nth-of-type(1){text-align:center;width:120px;font-weight:bold\n}\n.zmiti-add-form .zmiti-safe-content>div[data-v-7a26d039]:nth-of-type(2){flex:1;-webkit-flex:1\n}\n.zmiti-add-form .zmiti-safe-content>div[data-v-7a26d039]:nth-of-type(3){width:80px;cursor:pointer;text-align:center;color:#06c\n}\n.zmiti-add-form.detail-enter-active[data-v-7a26d039],.zmiti-add-form.detail-leave-active[data-v-7a26d039]{-webkit-transition:.2s;transition:.2s\n}\n.zmiti-add-form.detail-enter[data-v-7a26d039],.zmiti-add-form.detail-leave-to[data-v-7a26d039]{-webkit-transform:translateX(100%);transform:translateX(100%)\n}\n.zmiti-add-form .zmiti-submit-avatar[data-v-7a26d039]{background:rgba(51,144,255,0.1);border-radius:50%;text-align:center;width:80px;height:80px;line-height:80px;margin:0 auto 30px;cursor:pointer;position:relative\n}\n.zmiti-add-form .zmiti-submit-avatar label[data-v-7a26d039]{position:absolute;bottom:-50px;font-size:12px;width:100%;text-align:center;left:0\n}\n.zmiti-add-form .zmiti-submit-avatar span[data-v-7a26d039]{font-size:40px;color:rgba(51,144,255,0.8)\n}\n.zmiti-add-form .zmiti-add-form-C[data-v-7a26d039]{margin:10px auto 2px;width:90%\n}\n.zmiti-add-form .zmiti-add-form-item[data-v-7a26d039]{line-height:50px;height:50px\n}\n.zmiti-add-form .zmiti-add-form-item.zmiti-add-btns[data-v-7a26d039]{text-align:center;position:relative;z-index:10\n}\n.zmiti-add-form .zmiti-add-form-item.zmiti-add-btns button[data-v-7a26d039]{margin:0 20px;padding:2px 20px\n}\n.zmiti-add-form .zmiti-add-form-item input[data-v-7a26d039]{padding-left:6px;height:32px;width:70%;border:1px solid #d8d8d8;outline:none\n}\n.zmiti-inforuserlist-select ul[data-v-7a26d039]{display:flex;display:-webkit-flex;flex-flow:row;flex-wrap:wrap\n}\n.zmiti-inforuserlist-select ul li[data-v-7a26d039]{width:120px\n}\n.zmiti-select-column[data-v-7a26d039]{padding:10px\n}\n.zmiti-partydetail-form[data-v-7a26d039]{padding:20px\n}\n.zmiti-partydetail-form img[data-v-7a26d039]{width:auto;height:100px;margin-bottom:10px\n}\n.zmiti-scroll[data-v-7a26d039]{overflow:auto\n}\n.zmiti-remove-icon[data-v-7a26d039]{cursor:pointer\n}\n",""])},763:function(t,i,a){"use strict";a.r(i);var e=a(64),r=a(2),n=a(91),o=(a(92),{props:["obserable"],name:"zmitiindex",data(){let t=(t,i,a)=>{if(!i)return a(new Error("请输入活动开始/结束时间"));var e=new Date(i);return"begintime"==t.fullField&&""!=this.formObj.endtime&&e.getTime()>=new Date(this.formObj.endtime).getTime()?a(new Error("活动开始时间不能大于活动结束时间")):"endtime"==t.fullField&&""!=this.formObj.begintime&&e.getTime()<=new Date(this.formObj.begintime).getTime()?a(new Error("活动结束时间不能小于活动开始时间")):a()};return{showImg:!1,currentChooseImg:{},isedit:"",columntitle:"",imgs:window.imgs,loading:!0,viewH:window.innerHeight,productid:0,partyActions:r.a.partyActions,company:r.a.getCurrentCompanyId(),formObj:{partyid:"",partyname:"",partyurl:"",begintime:"",endtime:"",abstract:""},ruleValidate:{partyname:[{required:!0,message:"请输入活动名称",trigger:["change","blur"]}],partyurl:[{type:"url",message:"请输入合法的URL链接",trigger:["change","blur"]}],begintime:[{required:!0,validator:t,trigger:"change"}],endtime:[{required:!0,validator:t,trigger:"change"}]},editorQuillOption:{modules:{toolbar:[["bold",{indent:"-1"},{indent:"+1"},{color:[]},{align:[]},"clean"]],syntax:{highlight:t=>hljs.highlightAuto(t).value}}}}},components:{quillEditor:n.quillEditor,ResourceList:e.a},created(){},mounted(){this.isedit=this.$route.params.isedit,this.productid=this.$route.params.productid,this.columntitle="add"==this.isedit?"添加活动":"修改活动","edit"==this.isedit&&this.getPartyDetail()},computed:{editor(){return this.$refs.myQuillEditor.quill}},methods:{goback(){window.history.go(-1)},adminAction(){this.$refs.ruleForm.validate(t=>{if(t){let t=this.formObj.partyid?this.partyActions.editParty.action:this.partyActions.addParty.action;var i=this;let a={productid:this.productid,companyid:this.company.companyid,partyurl:this.formObj.partyurl,partyname:this.formObj.partyname,abstract:this.formObj.abstract,begintime:new Date(this.formObj.begintime).getTime()/1e3,endtime:new Date(this.formObj.endtime).getTime()/1e3};"edit"==this.isedit&&(a.partyid=this.$route.params.id),r.a.ajax({remark:this.formObj.partyid?"editParty":"addParty",data:{action:t,info:a},success(t){i.$Message[0===t.getret?"success":"error"](t.msg||t.getmsg),setTimeout(()=>{window.history.go(-1)},1e3)}})}})},contentChange(t){this.formObj.abstract=t},getPartyDetail(){var t=this;r.a.ajax({remark:"getPartyDetail",data:{action:this.partyActions.getPartyDetail.action,condition:{companyid:this.company.companyid,partyid:this.$route.params.id,productid:this.productid}},error(){t.loading=!1},success(i){t.loading=!1,console.log(i.list,"获取详情"),0===i.getret&&(t.formObj={partyid:i.list.partyid,partyname:i.list.partyname,partyurl:i.list.partyurl,begintime:new Date(1e3*i.list.begintime),endtime:new Date(1e3*i.list.enteredtime),abstract:i.list.abstract})}})},onFinishChoose(t){this.currentChooseImg=t},chooseImg(){this.showImg=!1,this.formObj.partyurl=this.currentChooseImg.filepath},onEditorReady(t){},onEditorBlur(){},onEditorFocus(){},onEditorChange(t,i,a){}}}),d=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"zmiti-partydetail-main-ui"},[a("div",{staticClass:"zmiti-list-main"},[a("div",{staticClass:"zmiti-partynews-table lt-full"},[a("header",{staticClass:"zmiti-tab-header"},[a("div",[a("span",[t._v(t._s(t.columntitle))])]),t._v(" "),a("div",[a("Button",{attrs:{type:"primary"},on:{click:function(i){return t.goback()}}},[t._v("返回")])],1)]),t._v(" "),a("div",{staticClass:"zmiti-submit-main zmiti-scroll",style:{height:t.viewH-110+"px"}},[a("div",{staticClass:"zmiti-partydetail-form"},[a("Form",{ref:"ruleForm",attrs:{model:t.formObj,"label-width":120,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"活动名称：",prop:"partyname"}},[a("Input",{attrs:{placeholder:"活动名称"},model:{value:t.formObj.partyname,callback:function(i){t.$set(t.formObj,"partyname",i)},expression:"formObj.partyname"}})],1),t._v(" "),a("FormItem",{attrs:{label:"活动Banner图片：",prop:"partyurl"}},[a("img",{attrs:{src:t.formObj.partyurl||t.imgs.defaultImg,alt:""}}),t._v(" "),a("div",[a("Button",{attrs:{icon:"ios-cloud-upload-outline"},on:{click:function(i){t.showImg=!0}}},[t._v("选择图片")])],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formObj.partyurl,expression:"formObj.partyurl"}],attrs:{placeholder:"活动Banner图片",type:"hidden"},domProps:{value:t.formObj.partyurl},on:{input:function(i){i.target.composing||t.$set(t.formObj,"partyurl",i.target.value)}}})]),t._v(" "),a("FormItem",{attrs:{label:"开始时间：",prop:"begintime"}},[a("DatePicker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"开始时间"},model:{value:t.formObj.begintime,callback:function(i){t.$set(t.formObj,"begintime",i)},expression:"formObj.begintime"}})],1),t._v(" "),a("FormItem",{attrs:{label:"结束时间：",prop:"endtime"}},[a("DatePicker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"结束时间"},model:{value:t.formObj.endtime,callback:function(i){t.$set(t.formObj,"endtime",i)},expression:"formObj.endtime"}})],1),t._v(" "),a("FormItem",{attrs:{label:"活动描述："}},[a("div",{staticClass:"edit_container"},[a("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorQuillOption},on:{blur:function(i){return t.onEditorBlur(i)},focus:function(i){return t.onEditorFocus(i)},change:function(i){return t.onEditorChange(i)}},model:{value:t.formObj.abstract,callback:function(i){t.$set(t.formObj,"abstract",i)},expression:"formObj.abstract"}})],1)]),t._v(" "),a("FormItem",{attrs:{label:""}},[a("Button",{attrs:{type:"primary"},on:{click:t.adminAction}},[t._v("提交")])],1)],1)],1)])])]),t._v(" "),a("Modal",{attrs:{title:"资料库",width:"800"},model:{value:t.showImg,callback:function(i){t.showImg=i},expression:"showImg"}},[t.showImg?a("ResourceList",{attrs:{isAdmin:!1,isDialog:!0},on:{onFinished:t.onFinishChoose}}):t._e(),t._v(" "),a("div",{staticClass:"zmiti-resourcelist-footer",attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{width:"100px"},on:{click:function(i){t.showImg=!1}}},[t._v("取消")]),t._v(" "),a("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:t.chooseImg}},[t._v("确定")])],1)],1)],1)};d._withStripped=!0;var s=a(3),m=!1;var l=function(t){m||(a(621),a(623))},p=Object(s.a)(o,d,[],!1,l,"data-v-7a26d039",null);p.options.__file="components\\party\\index\\detail.vue";i.default=p.exports}}]);