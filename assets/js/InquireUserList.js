(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{704:function(t,i,e){var a=e(705);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,e(6).default)("214cd34a",a,!1,{})},705:function(t,i,e){(t.exports=e(4)()).push([t.i,'\n.zmiti-inquire-main-ui[data-v-14cb5ee4]{background:#f2f2f2;box-sizing:border-box;height:100%;width:99%;margin:0 auto\n}\n.zmiti-inquire-main-ui .zmiti-list-main[data-v-14cb5ee4]{box-sizing:border-box;background:#fff;margin:0 auto\n}\n.zmiti-inquire-main-ui .zmiti-tabs-select[data-v-14cb5ee4]{width:98%;margin:10px auto\n}\n.zmiti-inquire-main-ui .zmiti-list-where[data-v-14cb5ee4]{font-size:14px;width:98%;margin:10px auto;display:flex;display:-webkit-flex;flex-flow:row\n}\n.zmiti-inquire-main-ui .zmiti-list-where .zmiti-search-dates[data-v-14cb5ee4]{margin:0 10px\n}\n.zmiti-inquire-main-ui .zmiti-scroll[data-v-14cb5ee4]{overflow:auto\n}\n.zmiti-inquire-main-ui .zmiti-submit-main[data-v-14cb5ee4]{flex:5;-webkit-flex:5;width:100%\n}\n.zmiti-inquire-main-ui .zmiti-submit-main>div[data-v-14cb5ee4]{-webkit-transition:.3s;transition:.3s\n}\n.zmiti-inquire-main-ui .zmiti-submit-main .zmiti-submit-table[data-v-14cb5ee4]{width:98%;margin:0 auto\n}\n.zmiti-add-form[data-v-14cb5ee4]{width:500px;overflow:auto;position:absolute !important;top:0;right:0;z-index:100;height:100%;box-shadow:0 0 0 1px #ccc;box-sizing:border-box;background:#f9f9f9\n}\n.zmiti-add-form .zmiti-add-form-C[data-v-14cb5ee4]{margin:10px auto 2px;width:90%\n}\n.zmiti-add-form .zmiti-question[data-v-14cb5ee4]{padding-top:10px\n}\n.zmiti-add-form .zmiti-question .question-title[data-v-14cb5ee4]{margin-top:10px;font-size:16px\n}\n.zmiti-add-form .zmiti-question .question-title img[data-v-14cb5ee4]{width:100px;height:100px;margin:5px 20px\n}\n.zmiti-add-form .zmiti-question .question-option[data-v-14cb5ee4]{font-size:14px;margin:10px 0 10px 15px\n}\n.zmiti-add-form .zmiti-question .question-option img[data-v-14cb5ee4]{width:50px;height:50px\n}\n.zmiti-add-form .zmiti-question .question-option div[data-v-14cb5ee4]{display:flex;align-items:center;margin:5px 0\n}\n.zmiti-add-form .zmiti-question .question-option input[type="radio"][data-v-14cb5ee4],.zmiti-add-form .zmiti-question .question-option input[type="checkbox"][data-v-14cb5ee4]{width:16px;height:16px;margin-right:10px\n}\n.zmiti-add-form .zmiti-add-form-item[data-v-14cb5ee4]{line-height:50px;height:50px\n}\n.zmiti-add-form .zmiti-add-form-item.zmiti-add-btns[data-v-14cb5ee4]{text-align:center;position:relative;z-index:10\n}\n.zmiti-add-form .zmiti-add-form-item.zmiti-add-btns button[data-v-14cb5ee4]{margin:0 20px;padding:2px 20px\n}\n.zmiti-add-form .zmiti-add-form-item input[data-v-14cb5ee4]{padding-left:6px;height:32px;width:70%;border:1px solid #d8d8d8;outline:none\n}\n',""])},726:function(t,i,e){"use strict";e.r(i);var a=e(0),n=e(2),o=e(9),s={props:["options"],data:()=>({columns:[{key:"optionsid",type:"index",width:50},{title:"图片",key:"optionsurl",width:150,render:(t,i)=>{let e=i.row.optionsurl;return""!=e?t("img",{attrs:{src:e},style:{height:"100px",margin:"5px"}}):t("span",{},"")}},{title:"选项",key:"options",align:"left"},{title:"选择人数",key:"number",align:"left",width:100},{title:"百分比",key:"percent",align:"left",width:200,render:(t,i)=>t("Progress",{props:{percent:Number(i.row.percent.toFixed(2))}})}]}),mounted(){},methods:{}},r=function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("Table",{attrs:{columns:this.columns,data:this.options}})],1)};r._withStripped=!0;var d=e(3),l=Object(d.a)(s,r,[],!1,null,null,null);l.options.__file="components\\inquire\\index\\optionsrow.vue";var u=l.exports,c=e(10),m={props:["obserable"],name:"inquirelist",data(){return{showDetailPage:-1,columntitle:"用户调查",currTab:"result",imgs:window.imgs,loading:!0,viewH:window.innerHeight,productid:0,inquireid:void 0,inquireActions:n.a.inquireActions,company:n.a.getCurrentCompanyId(),total:0,loading:!1,resultLoading:!1,resultDataSource:[],dataSource:[],anserData:[],resultColumns:[{type:"expand",width:50,render:(t,i)=>{if([0,1].includes(i.row.questiontype)){let e=0;return i.row.options.forEach(t=>{e+=t.number}),i.row.options.forEach(t=>{t.percent=e>0?t.number/e*100:0}),t(u,{props:{options:i.row.options}})}return t("div",{},"")}},{title:"图片",key:"questionurl",width:150,render:(t,i)=>{let e=i.row.questionurl;return console.log(t),""!=e?t("img",{attrs:{src:e},style:{height:"100px",margin:"5px"}}):t("span",{},"")}},{title:"问题",key:"questionlabe"},{title:"类型",key:"questiontype",render:(t,i)=>{let e=i.row.questiontype,a="";return 0==e?a="单选":1==e?a="多选":2==e?a="单行":3==e&&(a="多行"),t("div",{},a)}},{title:"操作",key:"action",align:"center",width:150,render:(t,i)=>[0,1].includes(i.row.questiontype)?t("div",{},""):t("div",[t("span",{style:{cursor:"pointer",color:"rgb(0, 102, 204)"},on:{click:()=>{this.$router.push({name:"inquireuseranswerlist",params:{inquireid:this.inquireid,questionid:i.row.questionid,title:i.row.questionlabe}})}}},"查看详情信息")])}],columns:[{title:"编号",key:"vuid",align:"left",width:68},{title:"答卷人",key:"username",align:"left"},{title:"手机号",key:"contact",align:"left"},{title:"调查时间",key:"createtime",align:"left",render:(t,i)=>t("div",{},n.a.formatDate(i.row.createtime))},{title:"邮箱",key:"emaill",align:"left"},{title:"提交IP",key:"clientip",align:"left"},{title:"备注",key:"remarks",align:"left"},{title:"操作",key:"action",align:"center",width:100,render:(t,i)=>t("div",[t("span",{style:{cursor:"pointer",color:"rgb(0, 102, 204)"},on:{click:()=>{this.getAnserData(i.row)}}},"查看")])}],condition:{page_index:0,page_size:10},selectList:[]}},components:{ZmitiTable:o.a,OptionsRow:u,ZmitiMask:c.a},created(){},mounted(){this.productid=this.$route.params.productid,this.inquireid=this.$route.params.id,this.columntitle=this.$route.params.title,this.getDataList(),this.getResultDataList()},methods:{closeMaskPage(){a.default.obserable.trigger({type:"toggleMask",data:!1})},getAnserData(t){let i=this;i.anserData=[],n.a.ajax({remark:"getInquireResult",data:{action:this.inquireActions.getInquireResult.action,condition:{page_index:0,page_size:1e3,productid:this.productid,companyid:this.company.companyid,inquireid:Number(this.inquireid),vuid:t.vuid}},success(t){0===t.getret?i.anserData=t.list:i.$Message.error("获取用户答卷失败")}}),a.default.obserable.trigger({type:"toggleMask",data:!0})},goback(){window.history.go(-1)},currentTabs(t){console.log(t,"当前标签"),this.currTab=t},change(t){this.condition.page_index=t-1,this.getDataList()},searchHandle(){this.condition.page_index=0,this.getDataList()},getDataList(){let t=this;t.loading=!0;let i=Object.assign({companyid:this.company.companyid,productid:this.productid,inquireid:this.inquireid},this.condition);n.a.ajax({remark:"getPartyEnteredList",data:{action:this.inquireActions.getUserInquireList.action,condition:i},error(){t.loading=!1},success(i){t.loading=!1,0===i.getret&&(t.total=i.total,t.dataSource=i.list)}})},getResultDataList(){let t=this;t.resultLoading=!0,n.a.ajax({remark:"getQuestionList",data:{action:this.inquireActions.getQuestionList.action,condition:{page_index:0,page_size:1e3,companyid:this.company.companyid,inquireid:Number(this.inquireid),productid:Number(this.productid)}},error(){t.resultLoading=!1},success(i){t.resultLoading=!1;0===i.getret?(t.resultDataSource=i.list,t.resultDataSource.forEach(t=>{[2,3].includes(t.questiontype)?t._disableExpand=!0:t._expanded=!0})):t.$Message.error(i.msg||i.getmsg)}})},getSelection(t){this.selectList=t}}},p=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"zmiti-inquire-main-ui"},[e("div",{staticClass:"zmiti-list-main"},[e("header",{staticClass:"zmiti-tab-header"},[e("div",[e("span",[t._v(t._s(t.columntitle))])]),t._v(" "),e("div",[e("Button",{attrs:{type:"primary"},on:{click:function(i){return t.goback()}}},[t._v("返回")])],1)]),t._v(" "),e("div",{staticClass:"zmiti-submit-main zmiti-scroll",style:{height:t.viewH-110+"px"}},[e("div",{staticClass:"zmiti-tabs-select"},[e("Tabs",{on:{"on-click":t.currentTabs}},[e("TabPane",{attrs:{label:"调查结果",name:"result"}}),t._v(" "),e("TabPane",{attrs:{label:"调查用户",name:"user"}})],1)],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"result"==t.currTab,expression:"currTab == 'result'"}],staticClass:"zmiti-user-table"},[e("Table",{attrs:{loading:t.resultLoading,data:t.resultDataSource,columns:t.resultColumns}})],1),t._v(" "),e("ZmitiTable",{directives:[{name:"show",rawName:"v-show",value:"user"==t.currTab,expression:"currTab == 'user'"}],attrs:{loading:t.loading,dataSource:t.dataSource,columns:t.columns,change:t.change,current:t.condition.page_index+1,"page-size":t.condition.page_size,total:t.total},on:{getSelection:t.getSelection}})],1)]),t._v(" "),e("ZmitiMask",{on:{closeMaskPage:t.closeMaskPage},model:{value:t.showDetailPage,callback:function(i){t.showDetailPage=i},expression:"showDetailPage"}},[e("div",{attrs:{slot:"mask-content"},slot:"mask-content"},[e("section",{staticClass:"zmiti-add-form zmiti-scroll"},[e("header",{staticClass:"zmiti-add-header"},[e("img",{attrs:{src:t.imgs.back,alt:""},on:{click:t.closeMaskPage}}),t._v(" "),e("span",[t._v(t._s(t.columntitle))])]),t._v(" "),e("div",{staticClass:"zmiti-add-form-C "},t._l(t.anserData,(function(i,a){return e("div",{key:i.questionid,staticClass:"zmiti-question"},[e("div",{staticClass:"question-title"},[e("div",[e("span",[t._v(t._s(a+1)+".")]),e("span",[t._v(t._s(i.questionlabe))])]),t._v(" "),e("div",[""!=i.questionurl?e("img",{attrs:{src:i.questionurl||t.imgs.defaultImg,alt:""}}):t._e()])]),t._v(" "),0==i.questiontype?e("div",{staticClass:"question-option"},t._l(i.options,(function(a){return e("div",{key:"opt"+a.optionsid},[e("input",{attrs:{type:"radio",disabled:""},domProps:{checked:a.optionsid==i.coloect_options.optionsids[0],value:a.optionsid}}),t._v(" "),""!=a.optionsurl?e("img",{attrs:{src:a.optionsurl||t.imgs.defaultImg,alt:""}}):t._e(),t._v(" "),e("span",[t._v(t._s(a.options))])])})),0):t._e(),t._v(" "),1==i.questiontype?e("div",{staticClass:"question-option"},t._l(i.options,(function(a){return e("div",{key:"opt"+a.optionsid},[e("input",{attrs:{type:"checkbox",disabled:""},domProps:{checked:i.coloect_options.optionsids.includes(""+a.optionsid),value:a.optionsid}}),t._v(" "),""!=a.optionsurl?e("img",{attrs:{src:a.optionsurl||t.imgs.defaultImg,alt:""}}):t._e(),t._v(" "),e("span",[t._v(t._s(a.options))])])})),0):t._e(),t._v(" "),2==i.questiontype?e("div",{staticClass:"question-option"},[e("Input",{attrs:{disabled:""},model:{value:i.coloect_options.othertext,callback:function(e){t.$set(i.coloect_options,"othertext",e)},expression:"item.coloect_options.othertext"}})],1):t._e(),t._v(" "),3==i.questiontype?e("div",{staticClass:"question-option"},[e("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},disabled:""},model:{value:i.coloect_options.othertext,callback:function(e){t.$set(i.coloect_options,"othertext",e)},expression:"item.coloect_options.othertext"}})],1):t._e()])})),0),t._v(" "),e("div",{staticClass:"zmiti-add-form-item zmiti-add-btns"},[e("Button",{attrs:{size:"large"},on:{click:t.closeMaskPage}},[t._v("关闭")])],1)])])])],1)};p._withStripped=!0;var g=!1;var h=function(t){g||e(704)},b=Object(d.a)(m,p,[],!1,h,"data-v-14cb5ee4",null);b.options.__file="components\\inquire\\index\\userlist.vue";i.default=b.exports}}]);