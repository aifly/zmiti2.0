(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{125:function(t,a,i){"use strict";i.r(a);var e=i(0),o=i(19),n=i(22),s=i(23),r=i(33),m=o.a.adminActions,d=(m=o.a.companyActions,{props:["obserable"],name:"zmitiindex",data(){return{tabIndex:[0,-1],showAvatarModal:!1,imgType:"",currentChooseResource:{},visible:!1,showResource:!1,avatarList:["&#xe6a5;","&#xe6a4;","&#xe6a3;","&#xe6a2;","&#xe6a0;"],roleList:[],imgs:window.imgs,isLoading:!1,showDetail:!1,showDetailPage:-1,currentClassId:-1,adminuserId:"",currentUserid:"",formCompany:{avatar:"&#xe6a4;"},address:"",showPass:!1,showMap:!1,viewH:window.innerHeight,viewW:window.innerWidth,companyList:[],groupList:[],hideMenu:!1,columns:[{title:"单位名称",key:"companyname",align:"center"},{title:"单位地址",key:"companyaddress",align:"center",width:200},{title:"联系电话",key:"companyphone",align:"center"},{title:"状态",key:"status",align:"center",render:(t,a)=>t("div",{},1===a.row.status?"正常使用":0===a.row.status?"已禁用":"已删除")},{title:"操作",key:"action",align:"center",width:200,render:(t,a)=>t("div",[t("span",{style:{marginLeft:"10px",border:"none",fontSize:"12px",cursor:"pointer",color:"#06C"},on:{click:()=>{this.$router.push("/user/"+a.row.companyid)}}},"用户"),t("span",{props:{type:"primary",size:"small"},style:{margin:"2px 10px",border:"none",fontSize:"12px",cursor:"pointer",color:"#06C"},on:{click:()=>{this.showDetail=!0,this.formCompany=a.row,e.default.obserable.trigger({type:"toggleMask",data:!0})}}},"编辑"),t("Poptip",{props:{confirm:!0,title:"确定要删除吗？",placement:"left"},on:{"on-ok":()=>{this.delete(a.row.companyid)}}},[t("span",{props:{type:"error",size:"small"},style:{cursor:"pointer",color:"#06C"},on:{click:()=>{}}},"删除")])])}],formcompany:{pdfurl:"",longitude:"116.585856",latitude:"40.364989"},directoryList:{},condition:{page_index:0,page_size:10},userCondition:{page_index:0,page_size:10},userList:[],userinfo:{}}},components:{Avatar:n.a,ZmitiMask:s.a,ResourceList:r.a},beforeCreate(){},mounted(){window.s=this,this.userinfo=o.a.getAdminUserInfo(),this.getCompanyList()},watch:{showDetail(t){t?e.default.obserable.trigger({type:"toggleMask",data:!0}):setTimeout(()=>{this.showDetailPage=-1},310)}},methods:{chooseImg(){this.showResource=!1,this.formCompany[this.imgType]=this.currentChooseResource.custombilethum[0]},onFinished(t){this.currentChooseResource=t},getUserList(){var t=this;this.$route.params.companyid,new Promise((a,i)=>{o.a.adminAjax({remark:"getUserList",data:{action:m.getUserList.action,condition:this.userCondition},success(i){0===i.getret&&(t.userList=i.list,a())}})})},closeMaskPage(){e.default.obserable.trigger({type:"toggleMask",data:!1})},getAvatar(t){this.formCompany.avatar=t},initPassword(){var{$Message:t}=this;o.a.adminAjax({data:{action:m.modifyAdminPassword.action,adminuserid:this.formCompany.adminuserid,adminpwd:window.config.defaultPass},success(a){t[0===a.getret?"success":"error"](a.msg),a.getret}})},addAdmin(){this.showDetail=!0,this.adminuserId="",this.formCompany={avatar:"&#xe6a4;"},e.default.obserable.trigger({type:"toggleMask",data:!0})},delete(t){var a=this;o.a.adminAjax({remark:"delCompany",data:{action:m.delCompany.action,companyid:t},success(t){a.$Message[0===t.getret?"success":"error"](t.msg),0===t.getret&&a.getCompanyList()}})},getCompanyList(){var t=this;new Promise((a,i)=>{o.a.adminAjax({remark:"getCompanyList",data:{action:m.getCompanyList.action,condition:this.condition},success(i){0===i.getret&&(t.companyList=i.list,a())}})})},adminAction(){var t=this,a=this.formCompany.companyid,i=a?m.editCompany.action:m.addCompany.action;o.a.adminAjax({remark:a?"editCompany":"addCompany",data:{action:i,info:this.formCompany},success(a){t.$Message[0===a.getret?"success":"error"](a.msg),0===a.getret&&(t.showDetail=!1,t.getCompanyList(),t.closeMaskPage())}})}}}),l=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"zmiti-company-main-ui"},[i("div",{staticClass:"zmiti-list-main"},[i("header",{staticClass:"zmiti-tab-header"},[i("div",[t._v("单位管理")]),t._v(" "),i("div",[i("Button",{attrs:{type:"primary"},on:{click:t.addAdmin}},[t._v("新增单位")])],1)]),t._v(" "),i("section",{staticClass:"zmiti-list-where"},[t._v("\n\t\t\t单位名称："),i("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"单位名称"}}),t._v("\n\t\t\t单位地址："),i("Input",{staticStyle:{width:"auto"},attrs:{placeholder:"单位地址"}}),t._v(" "),i("Button",{attrs:{type:"primary"}},[t._v("查询")])],1),t._v(" "),i("div",{staticClass:"zmiti-company-main zmiti-scroll ",style:{height:t.viewH-180+"px"}},[i("div",{staticClass:"zmiti-company-table",class:{active:t.showDetail}},[i("Table",{attrs:{data:t.companyList,columns:t.columns}})],1)]),t._v(" "),(t.showDetail,t._e())]),t._v(" "),i("ZmitiMask",{on:{closeMaskPage:t.closeMaskPage},model:{value:t.showDetailPage,callback:function(a){t.showDetailPage=a},expression:"showDetailPage"}},[i("div",{attrs:{slot:"mask-content",name:"detail"},slot:"mask-content"},[i("section",{staticClass:"zmiti-add-form zmiti-scroll"},[i("header",{staticClass:"zmiti-add-header"},[i("img",{attrs:{src:t.imgs.back,alt:""},on:{click:t.closeMaskPage}}),t._v(" "),i("span",[t._v("基础信息")])]),t._v(" "),i("div",{staticClass:"zmiti-company-avatar",on:{click:function(a){t.showResource=!0,t.imgType="logourl"}}},[t._e(),t._v(" "),t.formCompany.logourl?i("img",{attrs:{src:t.formCompany.logourl,alt:""}}):t._e(),t._v(" "),i("label",[t._v("更换头像")])]),t._v(" "),i("Form",{staticClass:"zmiti-add-form-C",attrs:{model:t.formCompany,"label-width":120}},[i("FormItem",{attrs:{label:"单位名称："}},[i("Input",{attrs:{placeholder:"单位名称："},model:{value:t.formCompany.companyname,callback:function(a){t.$set(t.formCompany,"companyname",a)},expression:"formCompany.companyname"}})],1),t._v(" "),i("FormItem",{attrs:{label:"单位地址："}},[i("Input",{attrs:{placeholder:"单位地址："},model:{value:t.formCompany.companyaddress,callback:function(a){t.$set(t.formCompany,"companyaddress",a)},expression:"formCompany.companyaddress"}})],1),t._v(" "),i("FormItem",{attrs:{label:"纳税识别号："}},[i("Input",{attrs:{placeholder:"纳税识别号："},model:{value:t.formCompany.companycode,callback:function(a){t.$set(t.formCompany,"companycode",a)},expression:"formCompany.companycode"}})],1),t._v(" "),i("FormItem",{attrs:{label:"单位电话："}},[i("Input",{attrs:{placeholder:"单位电话："},model:{value:t.formCompany.companyphone,callback:function(a){t.$set(t.formCompany,"companyphone",a)},expression:"formCompany.companyphone"}})],1),t._v(" "),i("FormItem",{attrs:{label:"开户行："}},[i("Input",{attrs:{placeholder:"开户行："},model:{value:t.formCompany.bank,callback:function(a){t.$set(t.formCompany,"bank",a)},expression:"formCompany.bank"}})],1),t._v(" "),i("FormItem",{attrs:{label:"开户行账号："}},[i("Input",{attrs:{placeholder:"开户行账号："},model:{value:t.formCompany.bankcode,callback:function(a){t.$set(t.formCompany,"bankcode",a)},expression:"formCompany.bankcode"}})],1),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),i("FormItem",{attrs:{label:"单位管理员："}},[i("Select",{model:{value:t.formCompany.userid,callback:function(a){t.$set(t.formCompany,"userid",a)},expression:"formCompany.userid"}},t._l(t.userList,(function(a,e){return i("Option",{key:e,attrs:{value:a.userid}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(a.username)+"\n\t\t\t\t\t\t\t")])})),1)],1),t._v(" "),i("FormItem",{attrs:{label:"备注："}},[i("Input",{attrs:{placeholder:"备注："},model:{value:t.formCompany.comment,callback:function(a){t.$set(t.formCompany,"comment",a)},expression:"formCompany.comment"}})],1),t._v(" "),t._e(),t._v(" "),i("FormItem",{attrs:{label:"是否开启认证："}},[i("RadioGroup",{model:{value:t.formCompany.is_auth,callback:function(a){t.$set(t.formCompany,"is_auth",a)},expression:"formCompany.is_auth"}},[i("Radio",{attrs:{value:1,label:1}},[t._v("开启认证")]),t._v(" "),i("Radio",{attrs:{value:0,label:0}},[t._v("关闭认证")])],1)],1)],1),t._v(" "),i("div",{staticClass:"zmiti-add-form-item zmiti-add-btns"},[i("Button",{attrs:{size:"large",type:"primary"},on:{click:t.adminAction}},[t._v(t._s(t.formCompany.companyid?"保存":"确定"))])],1)],1)])]),t._v(" "),i("Avatar",{attrs:{avatar:t.formCompany.avatar},on:{getAvatar:t.getAvatar},model:{value:t.showAvatarModal,callback:function(a){t.showAvatarModal=a},expression:"showAvatarModal"}}),t._v(" "),i("Modal",{attrs:{title:"资料库",width:"800"},model:{value:t.showResource,callback:function(a){t.showResource=a},expression:"showResource"}},[t.showResource?i("ResourceList",{attrs:{isAdmin:!0,isDialog:!0},on:{onFinished:t.onFinished}}):t._e(),t._v(" "),i("div",{staticClass:"zmiti-resourcelist-footer",attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticStyle:{width:"100px"},on:{click:function(a){t.showResource=!1}}},[t._v("取消")]),t._v(" "),i("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:t.chooseImg}},[t._v("确定")])],1)],1)],1)};l._withStripped=!0;var c=i(18),p=!1;var u=function(t){p||i(94)},v=Object(c.a)(d,l,[],!1,u,"data-v-52825dc8",null);v.options.__file="admin\\company\\index.vue";a.default=v.exports},20:function(t,a,i){var e=i(21);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,i(17).default)("03927da0",e,!1,{})},21:function(t,a,i){(t.exports=i(1)()).push([t.i,"\n.zmiti-avatar-list[data-v-e6b7be7c]{display:flex;display:-webkit-flex;flex-flow:row\n}\n.zmiti-avatar-list span[data-v-e6b7be7c]{font-size:40px;margin-right:20px;cursor:pointer\n}\n.zmiti-avatar-list span.active[data-v-e6b7be7c]{color:#3390ff\n}\n",""])},22:function(t,a,i){"use strict";var e={props:{value:{type:Boolean},avatar:{type:String,default:""}},watch:{value(t){t||(this.chooseAvatar(),this.show=!1),this.show=t}},methods:{chooseAvatar(){this.$emit("getAvatar",this.avatarList[this.index]),this.$emit("input",!1)},closeModal(t){t||(this.chooseAvatar(),this.show=!1),this.show=t}},data:()=>({show:!0,index:-1,avatarList:["&#xe6a5;","&#xe6a4;","&#xe6a3;","&#xe6a2;","&#xe6a0;","&#xe661;"]}),mounted(){this.avatarList.forEach((t,a)=>{t===this.avatar&&(this.index=a)})}},o=function(){var t=this,a=t.$createElement,i=t._self._c||a;return t.value?i("div",[i("Modal",{attrs:{title:"更换头像",transfer:!0,"mask-closable":!1},on:{"on-visible-change":t.closeModal},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"primary"},on:{click:t.chooseAvatar}},[t._v("确定")])],1),t._v(" "),i("div",{staticClass:"zmiti-avatar-list"},t._l(t.avatarList,(function(a,e){return i("span",{key:e,staticClass:"zmt_iconfont",class:{active:t.index===e},domProps:{innerHTML:t._s(a)},on:{click:function(a){t.index=e}}})})),0)])],1):t._e()};o._withStripped=!0;var n=i(18),s=!1;var r=function(t){s||i(20)},m=Object(n.a)(e,o,[],!1,r,"data-v-e6b7be7c",null);m.options.__file="common\\avatar\\index.vue";a.a=m.exports},94:function(t,a,i){var e=i(95);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,i(17).default)("59cfdeea",e,!1,{})},95:function(t,a,i){(t.exports=i(1)()).push([t.i,'\n.zmiti-company-main-ui[data-v-52825dc8]{background:#f2f2f2;box-sizing:border-box;height:100%;width:99%;margin:0 auto\n}\n.zmiti-company-main-ui .zmiti-avatar-list[data-v-52825dc8]{display:flex;display:-webkit-flex;flex-flow:row\n}\n.zmiti-company-main-ui .zmiti-avatar-list span[data-v-52825dc8]{font-size:40px;margin-right:20px;cursor:pointer\n}\n.zmiti-company-main-ui .zmiti-avatar-list span.active[data-v-52825dc8]{color:#3390ff\n}\n.zmiti-company-main-ui .ivu-table-wrapper[data-v-52825dc8]{border-bottom:none;border-right:none\n}\n.zmiti-company-main-ui .zmiti-list-main[data-v-52825dc8]{box-sizing:border-box;background:#fff;margin:0 auto;flex:2;-webkit-flex:2;position:relative;top:5px;display:flex;display:-webkit-flex;flex-flow:column\n}\n.zmiti-company-main-ui .zmiti-list-main[data-v-52825dc8]:before{content:"";position:absolute;width:100%;height:100%;left:0;top:0;box-shadow:0 0 0 1px #ccc\n}\n.zmiti-company-main-ui .zmiti-list-main .zmiti-add-form-close[data-v-52825dc8]{z-index:100\n}\n.zmiti-company-main-ui .zmiti-list-main>div[data-v-52825dc8]{margin:10px auto 10px;position:relative;flex:1;-webkit-flex:1\n}\n.zmiti-company-main-ui .zmiti-list-main>div .zmiti-meet-form[data-v-52825dc8]{width:100%;margin:0px auto;padding:20px 40px;height:600px;overflow:auto\n}\n.zmiti-company-main-ui .zmiti-list-main .zmiti-list-where[data-v-52825dc8]{width:98%;margin:10px auto 0;height:40px;line-height:40px;font-size:14px;position:relative;z-index:10\n}\n.zmiti-company-main-ui .zmiti-list-main .zmiti-list-where input[data-v-52825dc8]{height:30px\n}\n.zmiti-company-main-ui .zmiti-list-main .zmiti-company-main[data-v-52825dc8]{flex:5;-webkit-flex:5;width:100%\n}\n.zmiti-company-main-ui .zmiti-list-main .zmiti-company-main>div[data-v-52825dc8]{-webkit-transition:.3s;transition:.3s\n}\n.zmiti-company-main-ui .zmiti-list-main .zmiti-company-main .zmiti-company-table[data-v-52825dc8]{width:98%;margin:0 auto\n}\n.zmiti-company-main-ui .lt-full[data-v-52825dc8]{position:fixed !important;background:rgba(0,0,0,0.5);z-index:1001;overflow:hidden\n}\n.zmiti-company-main-ui .lt-full .zmiti-left-pannel[data-v-52825dc8]{position:absolute;width:100%;height:100px;left:0;top:0;z-index:10\n}\n.zmiti-add-form[data-v-52825dc8]{flex:1;-webkit-flex:1;width:500px;overflow:auto;position:absolute !important;top:0;right:0;z-index:100;height:100%;position:relative;box-shadow:0 0 0 1px #ccc;box-sizing:border-box;background:#f9f9f9\n}\n.zmiti-add-form .zmiti-safe-content[data-v-52825dc8]{display:flex;display:-webkit-flex;flex-flow:row;-webkit-align-items:center;align-items:center;margin-top:30px;justify-content:space-around;-webkit-justify-content:space-around;border:1px dashed #ccc;padding:10px 0\n}\n.zmiti-add-form .zmiti-safe-content>div[data-v-52825dc8]:nth-of-type(1){text-align:center;width:120px;font-weight:bold\n}\n.zmiti-add-form .zmiti-safe-content>div[data-v-52825dc8]:nth-of-type(2){flex:1;-webkit-flex:1\n}\n.zmiti-add-form .zmiti-safe-content>div[data-v-52825dc8]:nth-of-type(3){width:80px;cursor:pointer;text-align:center;color:#06c\n}\n.zmiti-add-form.detail-enter-active[data-v-52825dc8],.zmiti-add-form.detail-leave-active[data-v-52825dc8]{-webkit-transition:.2s;transition:.2s\n}\n.zmiti-add-form.detail-enter[data-v-52825dc8],.zmiti-add-form.detail-leave-to[data-v-52825dc8]{-webkit-transform:translateX(100%);transform:translateX(100%)\n}\n.zmiti-add-form .zmiti-company-avatar[data-v-52825dc8]{background:rgba(51,144,255,0.1);border-radius:50%;text-align:center;width:80px;height:80px;line-height:80px;margin:0 auto 30px;cursor:pointer;position:relative\n}\n.zmiti-add-form .zmiti-company-avatar img[data-v-52825dc8]{width:100%\n}\n.zmiti-add-form .zmiti-company-avatar label[data-v-52825dc8]{position:absolute;bottom:-50px;font-size:12px;width:100%;text-align:center;left:0\n}\n.zmiti-add-form .zmiti-company-avatar span[data-v-52825dc8]{font-size:40px;color:rgba(51,144,255,0.8)\n}\n.zmiti-add-form .zmiti-add-form-C[data-v-52825dc8]{margin:10px auto 2px;width:90%\n}\n.zmiti-add-form .zmiti-add-form-item[data-v-52825dc8]{line-height:50px;height:50px\n}\n.zmiti-add-form .zmiti-add-form-item.zmiti-add-btns[data-v-52825dc8]{text-align:center;position:relative;z-index:10\n}\n.zmiti-add-form .zmiti-add-form-item.zmiti-add-btns button[data-v-52825dc8]{margin:0 20px;padding:2px 20px\n}\n.zmiti-add-form .zmiti-add-form-item input[data-v-52825dc8]{padding-left:6px;height:32px;width:70%;border:1px solid #d8d8d8;outline:none\n}\n.ivu-icon-ios-help-circle[data-v-52825dc8]{left:25px\n}\n.ivu-radio-inner[data-v-52825dc8]:after{border-radius:10px !important\n}\n',""])}}]);