(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{166:function(t,i,n){var e=n(167);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,n(6).default)("30bdeeab",e,!1,{})},167:function(t,i,n){(t.exports=n(3)()).push([t.i,'/*.ant-btn:focus, .ant-btn:hover,.ant-input:focus, .ant-input:hover {\r\n    background-color: #fff;\r\n    border-color: #bf1616;\r\n    box-shadow: 0 0 0 2px rgba(191, 22, 22, 0.1);\r\n}*/\n.zmiti-rolegroup-main-ui[data-v-f5109258] {\n  background: #f2f2f2;\n  box-sizing: border-box;\n  height: 100%;\n  width: 99%;\n  margin: 0 auto;\n}\n.zmiti-rolegroup-main-ui .zmiti-avatar-list[data-v-f5109258] {\n    display: flex;\n    display: -webkit-flex;\n    flex-flow: row;\n}\n.zmiti-rolegroup-main-ui .zmiti-avatar-list span[data-v-f5109258] {\n      font-size: 40px;\n      margin-right: 20px;\n      cursor: pointer;\n}\n.zmiti-rolegroup-main-ui .zmiti-avatar-list span.active[data-v-f5109258] {\n        color: #3390ff;\n}\n.zmiti-rolegroup-main-ui .ivu-table-wrapper[data-v-f5109258] {\n    border-bottom: none;\n    border-right: none;\n}\n.zmiti-rolegroup-main-ui .zmiti-list-main[data-v-f5109258] {\n    box-sizing: border-box;\n    background: #fff;\n    margin: 0 auto;\n    flex: 2;\n    -webkit-flex: 2;\n    position: relative;\n    top: 5px;\n    display: flex;\n    display: -webkit-flex;\n    flex-flow: column;\n}\n.zmiti-rolegroup-main-ui .zmiti-list-main[data-v-f5109258]:before {\n      content: "";\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      left: 0;\n      top: 0;\n      box-shadow: 0 0 0 1px #ccc;\n}\n.zmiti-rolegroup-main-ui .zmiti-list-main .zmiti-add-form-close[data-v-f5109258] {\n      z-index: 100;\n}\n.zmiti-rolegroup-main-ui .zmiti-list-main > div[data-v-f5109258] {\n      margin: 10px auto 10px;\n      position: relative;\n      flex: 1;\n      -webkit-flex: 1;\n}\n.zmiti-rolegroup-main-ui .zmiti-list-main > div .zmiti-meet-form[data-v-f5109258] {\n        width: 100%;\n        margin: 0px auto;\n        padding: 20px 40px;\n        height: 600px;\n        overflow: auto;\n}\n.zmiti-rolegroup-main-ui .zmiti-list-main .zmiti-list-where[data-v-f5109258] {\n      width: 98%;\n      margin: 10px auto 0;\n      height: 40px;\n      line-height: 40px;\n      font-size: 14px;\n      position: relative;\n      z-index: 10;\n}\n.zmiti-rolegroup-main-ui .zmiti-list-main .zmiti-list-where input[data-v-f5109258] {\n        height: 30px;\n}\n.zmiti-rolegroup-main-ui .zmiti-list-main .zmiti-rolegroup-main[data-v-f5109258] {\n      flex: 5;\n      -webkit-flex: 5;\n      width: 100%;\n}\n.zmiti-rolegroup-main-ui .zmiti-list-main .zmiti-rolegroup-main > div[data-v-f5109258] {\n        -webkit-transition: 0.3s;\n        transition: 0.3s;\n}\n.zmiti-rolegroup-main-ui .zmiti-list-main .zmiti-rolegroup-main .zmiti-rolegroup-table[data-v-f5109258] {\n        width: 98%;\n        margin: 0 auto;\n}\n.zmiti-rolegroup-main-ui .lt-full[data-v-f5109258] {\n    position: fixed !important;\n    background: rgba(0, 0, 0, 0.5);\n    z-index: 1001;\n    overflow: hidden;\n}\n.zmiti-rolegroup-main-ui .lt-full .zmiti-left-pannel[data-v-f5109258] {\n      position: absolute;\n      width: 100%;\n      height: 100px;\n      left: 0;\n      top: 0;\n      z-index: 10;\n}\n.zmiti-add-form[data-v-f5109258] {\n    flex: 1;\n    -webkit-flex: 1;\n    width: 500px;\n    overflow: auto;\n    position: absolute !important;\n    top: 0;\n    right: 0;\n    z-index: 100;\n    height: 100%;\n    position: relative;\n    box-shadow: 0 0 0 1px #ccc;\n    box-sizing: border-box;\n    background: #f9f9f9;\n}\n.zmiti-add-form .zmiti-safe-content[data-v-f5109258] {\n      display: flex;\n      display: -webkit-flex;\n      flex-flow: row;\n      -webkit-align-items: center;\n      align-items: center;\n      margin-top: 30px;\n      justify-content: space-around;\n      -webkit-justify-content: space-around;\n      border: 1px dashed #ccc;\n      padding: 10px 0;\n}\n.zmiti-add-form .zmiti-safe-content > div[data-v-f5109258]:nth-of-type(1) {\n        text-align: center;\n        width: 120px;\n        font-weight: bold;\n}\n.zmiti-add-form .zmiti-safe-content > div[data-v-f5109258]:nth-of-type(2) {\n        flex: 1;\n        -webkit-flex: 1;\n}\n.zmiti-add-form .zmiti-safe-content > div[data-v-f5109258]:nth-of-type(3) {\n        width: 80px;\n        cursor: pointer;\n        text-align: center;\n        color: #0066cc;\n}\n.zmiti-add-form.detail-enter-active[data-v-f5109258], .zmiti-add-form.detail-leave-active[data-v-f5109258] {\n      -webkit-transition: 0.2s;\n      transition: 0.2s;\n}\n.zmiti-add-form.detail-enter[data-v-f5109258], .zmiti-add-form.detail-leave-to[data-v-f5109258] {\n      -webkit-transform: translateX(100%);\n      transform: translateX(100%);\n}\n.zmiti-add-form .zmiti-rolegroup-avatar[data-v-f5109258] {\n      background: rgba(51, 144, 255, 0.1);\n      border-radius: 50%;\n      text-align: center;\n      width: 80px;\n      height: 80px;\n      line-height: 80px;\n      margin: 0 auto 30px;\n      cursor: pointer;\n      position: relative;\n}\n.zmiti-add-form .zmiti-rolegroup-avatar label[data-v-f5109258] {\n        position: absolute;\n        bottom: -50px;\n        font-size: 12px;\n        width: 100%;\n        text-align: center;\n        left: 0;\n}\n.zmiti-add-form .zmiti-rolegroup-avatar span[data-v-f5109258] {\n        font-size: 40px;\n        color: rgba(51, 144, 255, 0.8);\n}\n.zmiti-add-form .zmiti-add-form-C[data-v-f5109258] {\n      margin: 10px auto 2px;\n      width: 90%;\n}\n.zmiti-add-form .zmiti-add-form-item[data-v-f5109258] {\n      line-height: 50px;\n      height: 50px;\n}\n.zmiti-add-form .zmiti-add-form-item.zmiti-add-btns[data-v-f5109258] {\n        text-align: center;\n        position: relative;\n        z-index: 10;\n}\n.zmiti-add-form .zmiti-add-form-item.zmiti-add-btns button[data-v-f5109258] {\n          margin: 0 20px;\n          padding: 2px 20px;\n}\n.zmiti-add-form .zmiti-add-form-item input[data-v-f5109258] {\n        padding-left: 6px;\n        height: 32px;\n        width: 70%;\n        border: 1px solid #d8d8d8;\n        outline: none;\n}\n.ivu-icon-ios-help-circle[data-v-f5109258] {\n  left: 25px;\n}\n.ivu-radio-inner[data-v-f5109258]:after {\n  border-radius: 10px !important;\n}\n',""])},40:function(t,i,n){"use strict";n.r(i);var e=n(1),a=n(2),o=n(66),r=a.a.adminActions,l=a.a.userActions,d=a.a.companyActions,m=a.a.basicConfigActions,c=a.a.resourceActions,u=[{name:"基础配置模块",actions:Object.values(m)},{name:"管理员模块",actions:Object.values(r)},{name:"用户单位模块",actions:Object.values(d)},{name:"用户端模块",actions:Object.values(l)},{name:"资源模块",actions:Object.values(c)}],p={props:["obserable"],name:"zmitiindex",data(){return{actions:u,tabIndex:[0,-1],visible:!1,avatarList:["&#xe6a5;","&#xe6a4;","&#xe6a3;","&#xe6a2;","&#xe6a0;"],roleList:[],imgs:window.imgs,isLoading:!1,showDetail:!1,showDetailPage:-1,currentClassId:-1,adminuserId:"",currentUserid:"",formRoleGroup:{isover:0,actions:[],avatar:"&#xe6a4;"},address:"",showPass:!1,showMap:!1,viewH:window.innerHeight,viewW:window.innerWidth,companyList:[],adminList:[],groupList:[],hideMenu:!1,roleCol:[{title:"产品名称",key:"productname",align:"center"},{title:"访问权限",key:"role",align:"center",render:(t,i)=>(console.log(i.row),t("Checkbox",{props:{checked:!0,value:1===i.row.authstatus},on:{"on-change":t=>{a.a.ajax({url:window.config.baseUrl+"admin/setuserauth",data:{setuserid:this.currentUserid,productids:i.row.productid,isdel:1===i.row.authstatus?1:2}})}}},"访问权限"))}],columns:[{title:"权限组名称",key:"groupname",align:"center"},{title:"描述",key:"describes",align:"center"},{title:"用户列表",key:"grouptype",align:"center"},{title:"操作",key:"action",align:"center",width:200,render:(t,i)=>t("div",[t("span",{style:{border:"none",fontSize:"12px",cursor:"pointer",color:"#06C"},on:{click:()=>{this.visible=!0;var t=this;this.currentUserid=i.row.userid,a.a.ajax({url:window.config.baseUrl+"admin/getuserauth",data:{setuserid:i.row.userid},success(i){t.roleList=i.list,console.log(i)}})}}},"权限"),t("span",{props:{type:"primary",size:"small"},style:{margin:"2px 0 2px 10px",border:"none",fontSize:"12px",cursor:"pointer",color:"#06C"},on:{click:()=>{}}},"用户"),t("span",{props:{type:"primary",size:"small"},style:{margin:"2px 10px",border:"none",fontSize:"12px",cursor:"pointer",color:"#06C"},on:{click:()=>{var t=this;t.showDetail=!0,t.formRoleGroup=i.row,t.adminuserId=i.row.adminuserid,console.log(i.row)}}},"详情"),t("Poptip",{props:{confirm:!0,title:"确定要删除吗？"},on:{"on-ok":()=>{this.delGroup(i.row.id)}}},[t("span",{props:{type:"error",size:"small"},style:{cursor:"pointer",color:"#06C"},on:{click:()=>{}}},"删除")])])}],formcompany:{pdfurl:"",longitude:"116.585856",latitude:"40.364989"},companyList:[],directoryList:{},condition:{page_index:0,page_size:10},userinfo:{}}},components:{ZmitiMask:o.a},beforeCreate(){},mounted(){window.s=this,this.userinfo=a.a.getAdminUserInfo(),this.getGroupList()},watch:{showDetail(t){t?e.default.obserable.trigger({type:"toggleMask",data:!0}):setTimeout(()=>{this.showDetailPage=-1},310)}},methods:{closeMaskPage(){this.showDetailPage=-1},toggleAction(t){var{actions:i}=this.formRoleGroup;i.some(i=>i===t.action)?i.forEach((i,n)=>{i===t.action&&this.formRoleGroup.actions.splice(n,1)}):this.formRoleGroup.actions.push(t.action),console.log(this.formRoleGroup.actions)},initPassword(){var{$Message:t}=this;a.a.adminAjax({data:{action:r.modifyAdminPassword.action,adminuserid:this.formRoleGroup.adminuserid,adminpwd:window.config.defaultPass},success(i){t[0===i.getret?"success":"error"](i.msg),i.getret}})},addAdmin(){this.showDetail=!0,this.adminuserId="",this.formRoleGroup={isover:0,avatar:"&#xe6a4;"},e.default.obserable.trigger({type:"toggleMask",data:!0})},delGroup(t){var i=this;a.a.adminAjax({remark:"delGroup",data:{action:r.delGroup.action,id:t},success(t){i.$Message[0===t.getret?"success":"error"](t.msg),0===t.getret&&i.getGroupList()}})},help(){a.a.adminAjax({remark:"getGroupList",data:{action:r.getGroupList.action,condition:this.condition},success(t){0===t.getret&&(s.adminList=t.list,a.a.adminAjax({remark:"getGroupList",data:{action:r.getGroupList.action,condition:this.condition},success(t){0===t.getret&&(s.groupList=t.list)}}))}})},getGroupList(){var t=this;if("function"!=typeof window.Promise)return this.help(),void console.log("当前浏览器不支持Promise");new Promise((i,n)=>{a.a.adminAjax({remark:"getGroupList",data:{action:r.getGroupList.action,condition:this.condition},success(n){0===n.getret&&(t.groupList=n.list,i())}})})},roleGroupAction(){var t=this,i=this.formRoleGroup.id?r.editGroup.action:r.addGroup.action;a.a.adminAjax({remark:this.formRoleGroup.id?"editGroup":"addGroup",data:{action:i,info:this.formRoleGroup},success(i){t.$Message[0===i.getret?"success":"error"](i.msg),0===i.getret&&(t.showDetail=!1,t.getGroupList())}})}}},f=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"zmiti-rolegroup-main-ui"},[n("div",{staticClass:"zmiti-list-main"},[n("header",{staticClass:"zmiti-tab-header"},[n("div",[t._v("权限组管理")]),t._v(" "),n("div",[n("Button",{attrs:{type:"primary"},on:{click:t.addAdmin}},[t._v("新增权限组")])],1)]),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"zmiti-rolegroup-main zmiti-scroll ",style:{height:t.viewH-180+"px"}},[n("div",{staticClass:"zmiti-rolegroup-table",class:{active:t.showDetail}},[n("Table",{attrs:{data:t.groupList,columns:t.columns}})],1)]),t._v(" "),(t.showDetail,t._e())]),t._v(" "),n("ZmitiMask",{on:{closeMaskPage:t.closeMaskPage},model:{value:t.showDetailPage,callback:function(i){t.showDetailPage=i},expression:"showDetailPage"}},[n("div",{attrs:{slot:"mask-content"},slot:"mask-content"},[n("transition",{attrs:{name:"detail"}},[t.showDetail?n("section",{staticClass:"zmiti-add-form zmiti-scroll"},[n("header",{staticClass:"zmiti-add-header"},[n("img",{attrs:{src:t.imgs.back,alt:""},on:{click:function(i){t.showDetail=!1}}}),t._v(" "),n("span",[t._v("基础信息")])]),t._v(" "),n("h2",{staticStyle:{height:"50px"}}),t._v(" "),n("Form",{staticClass:"zmiti-add-form-C",attrs:{model:t.formRoleGroup,"label-width":110}},[n("FormItem",{attrs:{label:"权限组名称："}},[n("Input",{attrs:{placeholder:"权限组名称："},model:{value:t.formRoleGroup.groupname,callback:function(i){t.$set(t.formRoleGroup,"groupname",i)},expression:"formRoleGroup.groupname"}})],1),t._v(" "),n("FormItem",{attrs:{label:"描述："}},[n("Input",{attrs:{placeholder:"描述："},model:{value:t.formRoleGroup.describes,callback:function(i){t.$set(t.formRoleGroup,"describes",i)},expression:"formRoleGroup.describes"}})],1),t._v(" "),n("FormItem",{attrs:{label:"管理员类别："}},[n("RadioGroup",{model:{value:t.formRoleGroup.grouptype,callback:function(i){t.$set(t.formRoleGroup,"grouptype",i)},expression:"formRoleGroup.grouptype"}},[n("Radio",{attrs:{value:2,label:2}},[t._v("普通管理员")]),t._v(" "),n("Radio",{attrs:{value:1,label:1}},[t._v("超级管理员")])],1)],1),t._v(" "),n("FormItem",{attrs:{label:"actions列表："}},t._l(t.actions,function(i,e){return n("div",{key:e,staticClass:"zmiti-action-list"},[n("div",{staticClass:"zmiti-action-title"},[t._v(t._s(e+1+"."+i.name)+"：")]),t._v(" "),n("div",{staticClass:"zmiti-action-content"},t._l(i.actions,function(i,e){return n("div",{key:e,class:{active:t.formRoleGroup.actions&&t.formRoleGroup.actions.some(function(t){return t===i.action})},attrs:{type:"border"},on:{click:function(n){return t.toggleAction(i)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(i.desc)+"\n\t\t\t\t\t\t\t\t\t\t")])}),0)])}),0),t._v(" "),n("FormItem",{attrs:{label:"是否系统管理组："}},[n("RadioGroup",{model:{value:t.formRoleGroup.issys,callback:function(i){t.$set(t.formRoleGroup,"issys",i)},expression:"formRoleGroup.issys"}},[n("Radio",{attrs:{value:1,label:1}},[t._v("是")]),t._v(" "),n("Radio",{attrs:{value:0,label:0}},[t._v("否")])],1)],1)],1),t._v(" "),n("div",{staticClass:"zmiti-add-form-item zmiti-add-btns"},[n("Button",{attrs:{size:"large",type:"primary"},on:{click:t.roleGroupAction}},[t._v(t._s(t.formRoleGroup.id?"保存":"确定"))])],1)],1):t._e()])],1)]),t._v(" "),n("Modal",{attrs:{title:"权限设置"},model:{value:t.visible,callback:function(i){t.visible=i},expression:"visible"}},[n("Table",{attrs:{data:t.roleList,columns:t.roleCol}})],1)],1)};f._withStripped=!0;var g=n(7),h=!1;var v=function(t){h||n(166)},b=Object(g.a)(p,f,[function(){var t=this.$createElement,i=this._self._c||t;return i("section",{staticClass:"zmiti-list-where"},[this._v("\n\t\t\t权限组编号 "),i("input",{attrs:{type:"text"}})])}],!1,v,"data-v-f5109258",null);b.options.__file="admin\\rolegroup\\index.vue";i.default=b.exports},64:function(t,i,n){var e=n(65);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,n(6).default)("61f6dc8c",e,!1,{})},65:function(t,i,n){(t.exports=n(3)()).push([t.i,"/*.ant-btn:focus, .ant-btn:hover,.ant-input:focus, .ant-input:hover {\r\n    background-color: #fff;\r\n    border-color: #bf1616;\r\n    box-shadow: 0 0 0 2px rgba(191, 22, 22, 0.1);\r\n}*/\n.zmiti-mask-ui[data-v-bc775556] {\n  position: fixed;\n  z-index: 1002;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  left: 0;\n  top: 0;\n}\n.zmiti-mask-ui .zmiti-mask-right[data-v-bc775556] {\n    position: absolute;\n    background: #fff;\n    top: 50px;\n    right: 0;\n    overflow: auto;\n    z-index: 10;\n}\n.zmiti-mask-ui .zmiti-mask-right.right-enter-active[data-v-bc775556], .zmiti-mask-ui .zmiti-mask-right.right-leave-active[data-v-bc775556] {\n      -webkit-transition: 0.2s;\n      transition: 0.2s;\n}\n.zmiti-mask-ui .zmiti-mask-right.right-leave-to[data-v-bc775556], .zmiti-mask-ui .zmiti-mask-right.right-enter[data-v-bc775556] {\n      -webkit-transform: translate3d(600px, 0, 0);\n      transform: translate3d(600px, 0, 0);\n}\n.zmiti-mask-ui .lt-full[data-v-bc775556] {\n    z-index: 8;\n    height: 100%;\n}\n",""])},66:function(t,i,n){"use strict";var e=n(1),a={props:{value:{type:Number,default:function(){return-1}},width:{type:Number,default:function(){return 500}}},watch:{value(t){this.showPannel=t>-1}},data:()=>({viewH:window.innerHeight,showPannel:!1}),methods:{change(t){},hidePannel(){this.showPannel=!1},afterLeave(){this.$emit("input",!1),this.$emit("closeMaskPage")}},mounted(){e.default.obserable.on("toggleMask",t=>{this.showPannel=t})}},o=function(){var t=this,i=t.$createElement;return(t._self._c||i)("Drawer",{attrs:{title:"",placement:"right",width:500,closable:!1},on:{"on-visible-change":t.change},model:{value:t.showPannel,callback:function(i){t.showPannel=i},expression:"showPannel"}},[t._t("mask-content")],2)};o._withStripped=!0;var r=n(7),s=!1;var l=function(t){s||n(64)},d=Object(r.a)(a,o,[],!1,l,"data-v-bc775556",null);d.options.__file="common\\mask\\index.vue";i.a=d.exports}}]);