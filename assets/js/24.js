(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{110:function(t,e,i){var a=i(111);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i(4).default)("00068b8d",a,!1,{})},111:function(t,e,i){(t.exports=i(2)()).push([t.i,'/*.ant-btn:focus, .ant-btn:hover,.ant-input:focus, .ant-input:hover {\r\n    background-color: #fff;\r\n    border-color: #bf1616;\r\n    box-shadow: 0 0 0 2px rgba(191, 22, 22, 0.1);\r\n}*/\n.zmiti-user-main-ui[data-v-69e976b0] {\n  background: #f2f2f2;\n  box-sizing: border-box;\n  height: 100%;\n  width: 99%;\n  margin: 0 auto;\n}\n.zmiti-user-main-ui .zmiti-avatar-list[data-v-69e976b0] {\n    display: flex;\n    display: -webkit-flex;\n    flex-flow: row;\n}\n.zmiti-user-main-ui .zmiti-avatar-list span[data-v-69e976b0] {\n      font-size: 40px;\n      margin-right: 20px;\n      cursor: pointer;\n}\n.zmiti-user-main-ui .zmiti-avatar-list span.active[data-v-69e976b0] {\n        color: #3390ff;\n}\n.zmiti-user-main-ui .ivu-table-wrapper[data-v-69e976b0] {\n    border-bottom: none;\n    border-right: none;\n}\n.zmiti-user-main-ui .zmiti-list-main[data-v-69e976b0] {\n    box-sizing: border-box;\n    background: #fff;\n    margin: 0 auto;\n    flex: 2;\n    -webkit-flex: 2;\n    position: relative;\n    top: 5px;\n    display: flex;\n    display: -webkit-flex;\n    flex-flow: column;\n}\n.zmiti-user-main-ui .zmiti-list-main[data-v-69e976b0]:before {\n      content: "";\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      left: 0;\n      top: 0;\n      box-shadow: 0 0 0 1px #ccc;\n}\n.zmiti-user-main-ui .zmiti-list-main .zmiti-add-form-close[data-v-69e976b0] {\n      z-index: 100;\n}\n.zmiti-user-main-ui .zmiti-list-main > div[data-v-69e976b0] {\n      margin: 10px auto 10px;\n      position: relative;\n      flex: 1;\n      -webkit-flex: 1;\n}\n.zmiti-user-main-ui .zmiti-list-main > div .zmiti-meet-form[data-v-69e976b0] {\n        width: 100%;\n        margin: 0px auto;\n        padding: 20px 40px;\n        height: 600px;\n        overflow: auto;\n}\n.zmiti-user-main-ui .zmiti-list-main .zmiti-list-where[data-v-69e976b0] {\n      width: 98%;\n      margin: 10px auto 0;\n      height: 40px;\n      line-height: 40px;\n      font-size: 14px;\n      position: relative;\n      z-index: 10;\n}\n.zmiti-user-main-ui .zmiti-list-main .zmiti-list-where input[data-v-69e976b0] {\n        height: 30px;\n}\n.zmiti-user-main-ui .zmiti-list-main .zmiti-user-main[data-v-69e976b0] {\n      flex: 5;\n      -webkit-flex: 5;\n      width: 100%;\n}\n.zmiti-user-main-ui .zmiti-list-main .zmiti-user-main > div[data-v-69e976b0] {\n        -webkit-transition: 0.3s;\n        transition: 0.3s;\n}\n.zmiti-user-main-ui .zmiti-list-main .zmiti-user-main .zmiti-user-table[data-v-69e976b0] {\n        width: 98%;\n        margin: 0 auto;\n}\n.zmiti-user-main-ui .lt-full[data-v-69e976b0] {\n    position: fixed !important;\n    background: rgba(0, 0, 0, 0.5);\n    z-index: 1001;\n    overflow: hidden;\n}\n.zmiti-user-main-ui .lt-full .zmiti-left-pannel[data-v-69e976b0] {\n      position: absolute;\n      width: 100%;\n      height: 100px;\n      left: 0;\n      top: 0;\n      z-index: 10;\n}\n.zmiti-user-main-ui .zmiti-add-form[data-v-69e976b0] {\n    flex: 1;\n    -webkit-flex: 1;\n    width: 500px;\n    overflow: auto;\n    position: absolute !important;\n    top: 0;\n    right: 0;\n    z-index: 100;\n    height: 100%;\n    position: relative;\n    box-shadow: 0 0 0 1px #ccc;\n    box-sizing: border-box;\n    background: #f9f9f9;\n}\n.zmiti-user-main-ui .zmiti-add-form .zmiti-safe-content[data-v-69e976b0] {\n      display: flex;\n      display: -webkit-flex;\n      flex-flow: row;\n      -webkit-align-items: center;\n      align-items: center;\n      margin-top: 30px;\n      justify-content: space-around;\n      -webkit-justify-content: space-around;\n      border: 1px dashed #ccc;\n      padding: 10px 0;\n}\n.zmiti-user-main-ui .zmiti-add-form .zmiti-safe-content > div[data-v-69e976b0]:nth-of-type(1) {\n        text-align: center;\n        width: 120px;\n        font-weight: bold;\n}\n.zmiti-user-main-ui .zmiti-add-form .zmiti-safe-content > div[data-v-69e976b0]:nth-of-type(2) {\n        flex: 1;\n        -webkit-flex: 1;\n}\n.zmiti-user-main-ui .zmiti-add-form .zmiti-safe-content > div[data-v-69e976b0]:nth-of-type(3) {\n        width: 80px;\n        cursor: pointer;\n        text-align: center;\n        color: #0066cc;\n}\n.zmiti-user-main-ui .zmiti-add-form.detail-enter-active[data-v-69e976b0], .zmiti-user-main-ui .zmiti-add-form.detail-leave-active[data-v-69e976b0] {\n      -webkit-transition: 0.2s;\n      transition: 0.2s;\n}\n.zmiti-user-main-ui .zmiti-add-form.detail-enter[data-v-69e976b0], .zmiti-user-main-ui .zmiti-add-form.detail-leave-to[data-v-69e976b0] {\n      -webkit-transform: translateX(100%);\n      transform: translateX(100%);\n}\n.zmiti-user-main-ui .zmiti-add-form .zmiti-user-avatar[data-v-69e976b0] {\n      background: rgba(51, 144, 255, 0.1);\n      border-radius: 50%;\n      text-align: center;\n      width: 80px;\n      height: 80px;\n      line-height: 80px;\n      margin: 0 auto 30px;\n      cursor: pointer;\n      position: relative;\n}\n.zmiti-user-main-ui .zmiti-add-form .zmiti-user-avatar label[data-v-69e976b0] {\n        position: absolute;\n        bottom: -50px;\n        font-size: 12px;\n        width: 100%;\n        text-align: center;\n        left: 0;\n}\n.zmiti-user-main-ui .zmiti-add-form .zmiti-user-avatar span[data-v-69e976b0] {\n        font-size: 40px;\n        color: rgba(51, 144, 255, 0.8);\n}\n.zmiti-user-main-ui .zmiti-add-form .zmiti-add-form-C[data-v-69e976b0] {\n      margin: 10px auto 2px;\n      width: 90%;\n}\n.zmiti-user-main-ui .zmiti-add-form .zmiti-add-form-item[data-v-69e976b0] {\n      line-height: 50px;\n      height: 50px;\n}\n.zmiti-user-main-ui .zmiti-add-form .zmiti-add-form-item.zmiti-add-btns[data-v-69e976b0] {\n        text-align: center;\n        position: relative;\n        z-index: 10;\n}\n.zmiti-user-main-ui .zmiti-add-form .zmiti-add-form-item.zmiti-add-btns button[data-v-69e976b0] {\n          margin: 0 20px;\n          padding: 2px 20px;\n}\n.zmiti-user-main-ui .zmiti-add-form .zmiti-add-form-item input[data-v-69e976b0] {\n        padding-left: 6px;\n        height: 32px;\n        width: 70%;\n        border: 1px solid #d8d8d8;\n        outline: none;\n}\n.ivu-icon-ios-help-circle[data-v-69e976b0] {\n  left: 25px;\n}\n.ivu-radio-inner[data-v-69e976b0]:after {\n  border-radius: 10px !important;\n}\n',""])},131:function(t,e,i){"use strict";i.r(e);var a=i(0),n=i(6);let{formatDate:r,adminActions:s}=a.a;var o={props:["dataSource"],data(){return{powerData:[],formatDate:r,columns:[{title:"产品名称",key:"productname",align:"center"},{title:"开始时间",key:"startdate",align:"center",render:(t,e)=>t("div",{},r(e.row.startdate))},{title:"结束时间",key:"enddate",align:"center",render:(t,e)=>t("div",{},r(e.row.enddate))},{title:"使用状态",key:"status",align:"center",render:(t,e)=>{var i=1===e.row.status;return t("div",{style:i?{color:"green",fontWeight:"bold"}:{color:"red",fontWeight:"bold"}},i?"正常使用":"已禁用")}},{title:"操作",key:"action",align:"center",width:200,render:(t,e)=>t("div",[t("Poptip",{props:{confirm:!0,title:"确定要取消授权吗？",placement:"left"},on:{"on-ok":()=>{this.unpower(e.row,e.index)}}},[t("span",{props:{type:"error",size:"small"},style:{cursor:"pointer",color:"#06C"},on:{click:()=>{}}},"取消授权")]),t("span",{props:{type:"primary",size:"small"},style:{margin:"2px 10px",border:"none",fontSize:"12px",cursor:"pointer",color:"#06C"},on:{click:()=>{this.$emit("openMask",e.row)}}},"延期")])}]}},methods:{unpower(t,e){var i=this;a.a.adminAjax({remark:"delProductPower",data:{action:s.delProductPower.action,powerid:t.powerid},success(t){i.powerData.splice(e,1)}})}},mounted(){this.powerData=this.dataSource}},d=function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Table",{attrs:{data:this.powerData,columns:this.columns}})],1)};d._withStripped=!0;var m=i(1),l=Object(m.a)(o,d,[],!1,null,null,null);l.options.__file="admin\\productrole\\role.vue";var c=l.exports,{companyActions:u,zmitiActions:p,adminActions:f,formatDate:h,dataToNumber:v}=a.a,g={props:["obserable"],name:"zmitiindex",data(){return{targetKeys:[],showAvatarModal:!1,visible:!1,avatarList:["&#xe6a5;","&#xe6a4;","&#xe6a3;","&#xe6a2;","&#xe6a0;"],companyname:"",roleList:[],imgs:window.imgs,isLoading:!1,showDetail:!1,showDetailPage:-1,currentClassId:-1,adminuserId:"",currentUserid:"",formUser:{status:1,usersign:1,usertypesign:1,avatar:"&#xe6a4;"},address:"",showPass:!1,showMap:!1,viewH:window.innerHeight,viewW:window.innerWidth,dataSource:[],groupList:[],companyList:[],hideMenu:!1,unJoinedCompany:[],columns:[{type:"expand",title:"展开",width:60,render:(t,e)=>t(c,{props:{dataSource:e.row.dataSource||[]},on:{openMask:t=>{var e=this;e.showDetail=!0,e.formUser=t,t.startdate=h(t.startdate),t.enddate=h(t.enddate),e.showDetailPage=1}}},"aaa")},{title:"单位名称",key:"companyname",align:"center"},{title:"单位地址",key:"companyaddress",align:"center",width:200},{title:"联系电话",key:"companyphone",align:"center"},{title:"状态",key:"isover",align:"center",render:(t,e)=>t("div",{},1===e.row.status?"正常使用":0===e.row.status?"已禁用":"已删除")},{title:"操作",key:"action",align:"center",width:200,render:(t,e)=>t("div",[t("span",{props:{type:"primary",size:"small"},style:{margin:"2px 10px",border:"none",fontSize:"12px",cursor:"pointer",color:"#06C"},on:{click:()=>{var t=this;t.showDetail=!0,t.formUser=e.row,t.showDetailPage=1}}},"新增授权")])}],formUser:{pdfurl:"",longitude:"116.585856",latitude:"40.364989"},ruleValidate:{startdate:[{required:!0,type:"date",message:"开始时间不为能空",trigger:"blur"}],enddate:[{required:!0,type:"date",message:"结束时间不为能空",trigger:"blur"}]},directoryList:{},productList:[],powerList:[],condition:{page_index:0,page_size:10},powerListCondition:{page_index:0,page_size:10},userinfo:{}}},components:{ZmitiMask:n.a},beforeCreate(){},mounted(){window.s=this,this.userinfo=a.a.getAdminUserInfo(),this.getDataList()},watch:{showDetail(t){t?this.showDetailPage=1:setTimeout(()=>{this.showDetailPage=-1},310)},$route:{deep:!0,handler(){this.getDataList()}}},methods:{expand(t,e){},closeMaskPage(){this.showDetailPage=-1},handleChange2(t,e,i){var n=this;i.forEach((t,i)=>{a.a.adminAjax({remark:"left"===e?"exitCompany":"joinCompany",data:{action:u["left"===e?"exitCompany":"joinCompany"].action,userid:n.currentUserid,companyid:t},success(t){n.$Message[0===t.getret?"success":"error"](t.msg),n.getJoinedCompany()}})})},filterMethod:(t,e)=>t.label.indexOf(e)>-1,getJoinedCompany(){var t=this;a.a.adminAjax({remark:"getJoinedCompany",data:{action:u.getJoinedCompany.action,condition:{userid:t.currentUserid,page_index:0,page_size:20}},success(e){0===e.getret&&(t.targetKeys=[],e.list.forEach(e=>{t.targetKeys.push(e.companyid)}))}})},getCompanyList(){var t=this;a.a.adminAjax({remark:"getCompanyList",data:{action:u.getCompanyList.action,condition:{page_index:0,page_size:100}},success(e){0===e.getret&&(t.companyList=e.list,t.unJoinedCompany=[],t.companyList.forEach(e=>{e.companyid===t.$route.params.companyid&&(t.companyname=e.companyname),t.unJoinedCompany.push({key:e.companyid,label:e.companyname,description:e.companyname})}),console.log(t.companyList))}})},checkUser(){var t=this.formUser.username,{$Message:e}=this;a.a.adminAjax({remark:"checkUserName",data:{action:p.checkUserName.action,username:t},success(t){e[0===t.getret?t.used?"error":"success":"error"](t.msg)}})},getAvatar(t){this.formUser.avatar=t},initPassword(){var{$Message:t}=this;a.a.adminAjax({data:{action:u.modifyAdminPassword.action,adminuserid:this.formUser.adminuserid,adminpwd:window.config.defaultPass},success(e){t[0===e.getret?"success":"error"](e.msg),e.getret}})},addAdmin(){this.showDetail=!0,this.adminuserId="",this.formUser={isover:0,avatar:"&#xe6a4;"},this.showDetailPage=1},delete(t){var e=this;a.a.adminAjax({remark:"delUser",data:{action:u.delUser.action,userid:t},success(t){e.$Message[0===t.getret?"success":"error"](t.msg),0===t.getret&&e.getDataList()}})},getDataList(){var t=this;a.a.adminAjax({remark:"getProductList",data:{action:f.getProductList.action,condition:this.condition},success(e){0===e.getret&&(t.productList=e.list)}});var e=new Promise((e,i)=>{a.a.getProductListByAdmin({condition:{page_index:0,page_size:10},success:i=>{0===i.getret&&(t.dataSource=i.list,e(),console.log(t.dataSource,"dataSource"))}})}),i=new Promise((e,i)=>{var n=Object.assign(this.powerListCondition,{});a.a.adminAjax({remark:"getProductPowerList",data:{action:f.getProductPowerList.action,condition:n},success(i){0===i.getret&&(t.powerList=i.list,e())}})});Promise.all([e,i]).then(()=>{t.dataSource.forEach(e=>{e.dataSource=e.dataSource||[],t.powerList.forEach(t=>{e.companyid===t.companyid&&e.dataSource.push(t)})}),t.dataSource=t.dataSource.concat([])})},adminAction(){var t=this,e=f[this.formUser.powerid?"editProductPower":"addProductPower"].action;if(this.formUser.startdate&&this.formUser.enddate){var i=v(this.formUser.startdate),n=v(this.formUser.enddate),r={productid:t.formUser.productid,companyid:t.formUser.companyid,startdate:i,enddate:n,status:t.formUser.status,remarks:t.formUser.remarks};this.formUser.powerid&&(r.powerid=this.formUser.powerid),i>=n?this.$Message.error("开始时间不能大于结束时间"):a.a.adminAjax({remark:"addProductPower",data:{action:e,info:r},success(e){t.$Message[0===e.getret?"success":"error"](e.msg),0===e.getret&&(t.showDetail=!1,t.getDataList())}})}}}},b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"zmiti-user-main-ui"},[i("div",{staticClass:"zmiti-list-main"},[i("header",{staticClass:"zmiti-tab-header"},[i("div",[t.companyname?i("span",[t._v(t._s(t.companyname)+" —— ")]):t._e(),t._v("产品授权")]),t._v(" "),i("div")]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"zmiti-user-main zmiti-scroll ",style:{height:t.viewH-180+"px"}},[i("div",{staticClass:"zmiti-user-table",class:{active:t.showDetail}},[i("Table",{attrs:{data:t.dataSource,columns:t.columns},on:{"on-expand":t.expand}})],1)]),t._v(" "),(t.showDetail,t._e())]),t._v(" "),i("ZmitiMask",{on:{closeMaskPage:t.closeMaskPage},model:{value:t.showDetailPage,callback:function(e){t.showDetailPage=e},expression:"showDetailPage"}},[i("div",{attrs:{slot:"mask-content",name:"detail"},slot:"mask-content"},[t.showDetail?i("section",{staticClass:"zmiti-add-form zmiti-scroll"},[i("header",{staticClass:"zmiti-add-header"},[i("img",{attrs:{src:t.imgs.back,alt:""},on:{click:function(e){t.showDetail=!1}}}),t._v(" "),i("span",[t._v(t._s(t.formUser.powerid?"编辑授权":"添加授权"))])]),t._v(" "),i("div",{staticClass:"zmiti-user-avatar",staticStyle:{opacity:"0"}},[i("span",{staticClass:"zmt_iconfont",domProps:{innerHTML:t._s(t.formUser.avatar)}}),t._v(" "),i("label",[t._v("更换头像")])]),t._v(" "),i("Form",{staticClass:"zmiti-add-form-C",attrs:{model:t.formUser,rules:t.ruleValidate,"label-width":120}},[i("FormItem",{attrs:{label:"产品列表："}},[i("Select",{model:{value:t.formUser.productid,callback:function(e){t.$set(t.formUser,"productid",e)},expression:"formUser.productid"}},t._l(t.productList,function(e){return i("Option",{key:e.powerid,attrs:{value:e.productid}},[t._v(t._s(e.productname))])}),1)],1),t._v(" "),i("FormItem",{attrs:{label:"开始时间：",prop:"startdate"}},[i("DatePicker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"开始时间："},model:{value:t.formUser.startdate,callback:function(e){t.$set(t.formUser,"startdate",e)},expression:"formUser.startdate"}})],1),t._v(" "),i("FormItem",{attrs:{label:"结束时间：",prop:"enddate"}},[i("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"结束时间："},model:{value:t.formUser.enddate,callback:function(e){t.$set(t.formUser,"enddate",e)},expression:"formUser.enddate"}})],1),t._v(" "),i("FormItem",{attrs:{label:"状态："}},[i("RadioGroup",{model:{value:t.formUser.status,callback:function(e){t.$set(t.formUser,"status",e)},expression:"formUser.status"}},[i("Radio",{attrs:{value:0,label:0}},[t._v("禁用")]),t._v(" "),i("Radio",{attrs:{value:1,label:1}},[t._v("正常使用")])],1)],1),t._v(" "),i("FormItem",{attrs:{label:"备注："}},[i("Input",{attrs:{placeholder:"备注：",type:"textarea"},model:{value:t.formUser.remarks,callback:function(e){t.$set(t.formUser,"remarks",e)},expression:"formUser.remarks"}})],1)],1),t._v(" "),i("div",{staticClass:"zmiti-add-form-item zmiti-add-btns"},[i("Button",{attrs:{size:"large",type:"primary"},on:{click:t.adminAction}},[t._v(t._s(t.formUser.powerid?"确定":"保存"))])],1),t._v(" "),(t.formUser.userid,t._e())],2):t._e()])]),t._v(" "),i("Modal",{attrs:{title:"加入单位"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("div",[i("Transfer",{attrs:{data:t.unJoinedCompany,titles:["单位列表","当前加入的单位"],"target-keys":t.targetKeys,filterable:"","filter-method":t.filterMethod},on:{"on-change":t.handleChange2}})],1)])],1)};b._withStripped=!0;var w=!1;var x=function(t){w||i(110)},z=Object(m.a)(g,b,[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"zmiti-list-where"},[this._v("\n\t\t\t用户编号 "),e("input",{attrs:{type:"text"}})])}],!1,x,"data-v-69e976b0",null);z.options.__file="admin\\productrole\\index.vue";e.default=z.exports},33:function(t,e,i){var a=i(34);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i(4).default)("61f6dc8c",a,!1,{})},34:function(t,e,i){(t.exports=i(2)()).push([t.i,"/*.ant-btn:focus, .ant-btn:hover,.ant-input:focus, .ant-input:hover {\r\n    background-color: #fff;\r\n    border-color: #bf1616;\r\n    box-shadow: 0 0 0 2px rgba(191, 22, 22, 0.1);\r\n}*/\n.zmiti-mask-ui[data-v-bc775556] {\n  position: fixed;\n  z-index: 1002;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  left: 0;\n  top: 0;\n}\n.zmiti-mask-ui .zmiti-mask-right[data-v-bc775556] {\n    position: absolute;\n    background: #fff;\n    top: 50px;\n    right: 0;\n    overflow: auto;\n    z-index: 10;\n}\n.zmiti-mask-ui .zmiti-mask-right.right-enter-active[data-v-bc775556], .zmiti-mask-ui .zmiti-mask-right.right-leave-active[data-v-bc775556] {\n      -webkit-transition: 0.2s;\n      transition: 0.2s;\n}\n.zmiti-mask-ui .zmiti-mask-right.right-leave-to[data-v-bc775556], .zmiti-mask-ui .zmiti-mask-right.right-enter[data-v-bc775556] {\n      -webkit-transform: translate3d(600px, 0, 0);\n      transform: translate3d(600px, 0, 0);\n}\n.zmiti-mask-ui .lt-full[data-v-bc775556] {\n    z-index: 8;\n    height: 100%;\n}\n",""])},6:function(t,e,i){"use strict";var a={props:{value:{type:Number,default:function(){return-1}},width:{type:Number,default:function(){return 500}}},watch:{value(t){this.showPannel=t>-1}},data:()=>({viewH:window.innerHeight,showPannel:!0}),methods:{hidePannel(){this.showPannel=!1},afterLeave(){this.$emit("input",!1),this.$emit("closeMaskPage")}},mounted(){}},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.value>-1?i("div",{staticClass:"zmiti-mask-ui lt-full"},[i("transition",{attrs:{name:"right"},on:{"after-leave":t.afterLeave}},[t.showPannel?i("div",{staticClass:"zmiti-mask-right zmiti-scroll",style:{height:t.viewH-50+"px",width:t.width+"px"}},[t._t("mask-content")],2):t._e()]),t._v(" "),i("div",{staticClass:"lt-full",on:{click:t.hidePannel}})],1):t._e()};n._withStripped=!0;var r=i(1),s=!1;var o=function(t){s||i(33)},d=Object(r.a)(a,n,[],!1,o,"data-v-bc775556",null);d.options.__file="common\\mask\\index.vue";e.a=d.exports}}]);