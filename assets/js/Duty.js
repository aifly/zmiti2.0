(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{712:function(t,e,i){var a=i(713);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i(6).default)("5f83724d",a,!1,{})},713:function(t,e,i){(t.exports=i(4)()).push([t.i,"\n.zmiti-duty-main-ui[data-v-b12f2d6c]{width:98%;height:98%;left:1%;top:1%;display:flex;display:-webkit-flex;flex-flow:row\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C[data-v-b12f2d6c]{flex:1;height:100%;background:#fff;overflow:auto\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-tip[data-v-b12f2d6c]{height:40px;line-height:40px;font-size:13px;padding-left:20px\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-tip span[data-v-b12f2d6c]{margin-right:10px\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-tip span[data-v-b12f2d6c]:first-child{color:#3390ff\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-table[data-v-b12f2d6c]{width:98%;margin:0 auto;border:1px solid #eee\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-table header[data-v-b12f2d6c]{width:100%;display:flex;display:-webkit-flex;flex-flow:row;justify-content:space-around;height:45px;line-height:45px;border-bottom:1px solid #eee\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-table header span[data-v-b12f2d6c]{margin:0 0px;text-align:center;text-indent:-.1em;width:50px;cursor:pointer;display:inline-block\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-table header span i[data-v-b12f2d6c]{width:12px;font-size:24px\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-table .zmiti-duty-datepicker[data-v-b12f2d6c]{display:flex;display:-webkit-flex;flex-flow:row;flex-wrap:wrap;justify-content:space-between\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-table .zmiti-duty-datepicker li[data-v-b12f2d6c]{text-align:center;width:14%;height:75px;cursor:pointer;line-height:30px;margin:4px 0 0 0\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-table .zmiti-duty-datepicker li span[data-v-b12f2d6c]{display:block\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-table .zmiti-duty-datepicker li.active[data-v-b12f2d6c]{background:#3390ff;color:#fff\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-table .zmiti-duty-datepicker li.active span[data-v-b12f2d6c]{color:#fff !important\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-table .zmiti-duty-datepicker li[data-v-b12f2d6c]:hover{background:#3390ff;color:#fff\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-table .zmiti-duty-datepicker li:hover span[data-v-b12f2d6c]{color:#fff !important\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-table .zmiti-duty-datepicker li.zmiti-duty-week[data-v-b12f2d6c]:hover{background:transparent;color:#888\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-table .zmiti-duty-datepicker li .zmiti-datepicker-detail[data-v-b12f2d6c]{height:20px;font-size:12px;text-align:left;text-overflow:ellipsis;overflow:hidden;white-space:nowrap\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-table .zmiti-duty-datepicker li .zmiti-datepicker-detail label[data-v-b12f2d6c]{margin-left:5px\n}\n.zmiti-duty-main-ui .zmiti-duty-left-table-C .zmiti-duty-table .zmiti-duty-datepicker li.disabled[data-v-b12f2d6c]{background-color:#eee;border-color:#eee;color:#57a3f3;cursor:not-allowed\n}\n.zmiti-duty-main-ui .zmiti-duty-right-setting[data-v-b12f2d6c]{width:420px;margin-left:10px;background:#fff\n}\n.zmiti-duty-main-ui .zmiti-duty-right-setting>header[data-v-b12f2d6c]{height:50px;line-height:50px;font-size:16px;text-indent:1em;border-bottom:1px solid #eee\n}\n.zmiti-duty-main-ui .zmiti-duty-right-setting>header .zmt_iconfont[data-v-b12f2d6c]{font-size:16px;color:#975ae0;position:relative;margin-right:10px\n}\n.zmiti-duty-main-ui .zmiti-duty-right-setting>header .zmt_iconfont[data-v-b12f2d6c]:before{content:'';width:16px;height:16px;border-radius:50%;background:#975ae0;opacity:.2;position:absolute;-webkit-transform:scale(1.8);transform:scale(1.8);left:0;top:0\n}\n.zmiti-duty-main-ui .zmiti-duty-right-setting .zmiti-duty-list[data-v-b12f2d6c]{margin:20px\n}\n.zmiti-duty-main-ui .zmiti-duty-right-setting .zmiti-duty-list .zmiti-duty-item .title[data-v-b12f2d6c]{font-size:14px;height:40px;line-height:40px;font-weight:bold\n}\n.zmiti-duty-main-ui .zmiti-duty-right-setting .zmiti-duty-list .zmiti-duty-item .detail[data-v-b12f2d6c]{display:flex;display:-webkit-flex;flex-flow:row;justify-content:flex-start;margin-bottom:5px;line-height:30px\n}\n.zmiti-duty-main-ui .zmiti-duty-right-setting .zmiti-duty-list .zmiti-duty-item .detail .duty-person[data-v-b12f2d6c]{flex:1\n}\n.zmiti-duty-main-ui .zmiti-duty-right-setting .zmiti-duty-list .zmiti-duty-item .detail .duty-person div[data-v-b12f2d6c]{display:flex;display:-webkit-flex;flex-flow:row;justify-content:flex-start\n}\n.zmiti-duty-main-ui .zmiti-duty-right-setting .zmiti-duty-list .zmiti-duty-item .detail .duty-person div span[data-v-b12f2d6c]{margin-left:10px;flex:1\n}\n.zmiti-duty-main-ui .zmiti-duty-right-setting .zmiti-duty-list .zmiti-duty-item .detail .duty-person div span[data-v-b12f2d6c]:first-child{width:70px;flex:none\n}\n.zmiti-add-form[data-v-b12f2d6c]{width:500px;overflow:auto;position:absolute !important;top:0;right:0;z-index:100;height:100%;box-shadow:0 0 0 1px #ccc;box-sizing:border-box;background:#f9f9f9\n}\n.zmiti-add-form .zmiti-add-form-C[data-v-b12f2d6c]{margin:10px auto 2px;width:90%\n}\n.zmiti-add-form .zmiti-add-form-item[data-v-b12f2d6c]{line-height:50px;height:50px\n}\n.zmiti-add-form .zmiti-add-form-item.zmiti-add-btns[data-v-b12f2d6c]{text-align:center;position:relative;z-index:10\n}\n.zmiti-add-form .zmiti-add-form-item.zmiti-add-btns button[data-v-b12f2d6c]{margin:0 20px;padding:2px 20px\n}\n.zmiti-add-form .zmiti-add-form-item input[data-v-b12f2d6c]{padding-left:6px;height:32px;width:70%;border:1px solid #d8d8d8;outline:none\n}\n.zmiti-add-form .zmiti-add-form-item label[data-v-b12f2d6c]{font-size:16px\n}\n.zmiti-add-form .zmiti-add-form-item .ivu-icon[data-v-b12f2d6c]{margin-left:10px\n}\n",""])},714:function(t,e,i){var a=i(715);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i(6).default)("4a605a0a",a,!1,{})},715:function(t,e,i){(t.exports=i(4)()).push([t.i,"\n.zmiti-department-usermodal{height:400px\n}\n.zmiti-department-usermodal .zmiti-department-left{float:left;width:200px;height:100%;overflow:auto;padding-right:10px\n}\n.zmiti-department-usermodal .zmiti-department-right{float:left;height:100%;width:568px;overflow:auto\n}\n",""])},771:function(t,e,i){"use strict";i.r(e);var a=i(0),n=i(2),d=i(10),s=i(9),{dutyActions:r,departmentAction:o,userActions:l,formatDate:u}=n.a;let m=n.a.getCurrentCompanyId();var c={props:["obserable"],name:"dutyindex",data(){return{curNode:{},departmentTree:[{title:m.companyname,expand:!0,render:(t,{root:e,node:i,data:a})=>t("span",{style:{display:"inline-block",fontSize:"14px",cursor:"pointer"}},[t("span",{class:["ivu-tree-title","company-hone"],on:{click:t=>{$(".ivu-tree-title").removeClass("ivu-tree-title-selected"),$(".company-hone").addClass("ivu-tree-title-selected"),this.curNode=m,this.getDepartmentUserData()}}},[t("Icon",{props:{type:"ios-home",color:"#2d8cf0",size:"20"},style:{marginRight:"8px"}}),t("span",a.title)])]),children:[]}],userColumns:[{title:"姓名",key:"realname",align:"center",width:80},{title:"职务",width:100,key:"realname",align:"center"},{title:"部门",key:"departments",align:"center",render:(t,e)=>{let i=[];return e.row.departments.forEach(t=>{i.push(t.departmentname)}),t("div",{},i.join(","))}},{title:"办公电话",key:"jobphonenum",align:"center"},{title:"手机",key:"usermobile",align:"center"},{title:"邮箱",key:"useremail",align:"center"}],visiable:!1,productid:0,datePicker:new Array(42),weeks:["日","一","二","三","四","五","六"],loading:!1,monthdateCount:30,year:2019,month:7,today:0,currentYear:(new Date).getFullYear(),currentMonth:(new Date).getMonth()+1,imgs:window.imgs,dataSource:[],currentWeekIndex:-1,weekIndexOfFirstDay:0,condition:{page_index:0,page_size:1e3},loadingModal:!0,userData:[],userTotal:0,userLoading:!1,userCondition:{page_index:0,page_size:10},curEveningDuty:[],curDayDuty:[],userSelectList:[],addType:1,dayShift:[],eveningShift:[],clickDay:0}},components:{ZmitiMask:d.a,ZmitiTable:s.a},mounted(){this.goToToday(),this.today=(new Date).getDate()},methods:{goToToday(){this.setMonth((new Date).getFullYear(),(new Date).getMonth()+1),this.refresh()},refresh(){this.init(()=>{this.monthdateCount=this.getDateByMonth(),this.currentWeekIndex=this.getCurrentWeekIndex(),this.weekIndexOfFirstDay=this.getCurrentWeekIndex(1),this.getDataList()})},init(t){var e=setInterval(()=>{a.default.productList&&(clearInterval(e),this.productid||(a.default.productList.forEach(t=>{this.$route.name.indexOf(t.producturl.substr(1))>-1&&(this.productid=t.productid)}),this.productid&&t&&t(this.productid)))},100)},getDataList(){var t=this,{condition:e,year:i,month:a}=this;let d=Object.assign({companyid:m.companyid,productid:this.productid,dutyday:i+"-"+a+"-1",dutydayend:i+"-"+a+"-"+new Date(i,a,0).getDate()},e);t.loading=!0,n.a.ajax({remark:"getDutyList",data:{action:r.getDutyList.action,condition:d},error(){t.loading=!1},success(e){t.loading=!1,0===e.getret&&t.formatDutyData(e.list)}})},formatDutyData(t){let e=[],i=[];if(t.forEach(t=>{let a=e.indexOf(t.dutyday);-1==a&&(a=i.length,e.push(t.dutyday),i.push({dutyday:t.dutyday,data:[{dutytype:1,list:[]},{dutytype:2,list:[]}]}));let n={departmentid:t.departmentid,departmentname:t.departmentname,dutyday:this.formatDate(1e3*t.dutyday),dutyid:t.dutyid,dutytype:t.dutytype,dutytypename:1==t.dutyday?"白班":"晚班",status:t.status,userid:t.userid,username:t.username,realname:t.username,usermobile:t.usermobile};1==t.dutytype?i[a].data[0].list.push(n):i[a].data[1].list.push(n)}),i.sort((t,e)=>t.dutyday<e.dutyday?-1:t.dutyday>e.dutyday?1:0),this.curDayDuty.length<=0&&this.curEveningDuty.length<=0){let t=new Date;i.forEach(e=>{e.dutyday==new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()/1e3&&e.data.forEach(t=>{1==t.dutytype?this.curDayDuty=t.list:this.curEveningDuty=t.list})})}this.dataSource=i,console.log(i)},getDetail(t){this.clickDay=t-this.weekIndexOfFirstDay+1;let e=this.dataSource.filter(t=>this.clickDay===new Date(1e3*t.dutyday).getDate());this.dayShift=[],this.eveningShift=[],e.length>0&&e[0].data.forEach(t=>{1==t.dutytype?t.list.forEach(t=>{this.dayShift.push(t)}):t.list.forEach(t=>{this.eveningShift.push(t)})}),a.default.obserable.trigger({type:"toggleMask",data:!0})},addUser(){if(this.userSelectList.length<=0)return this.loadingModal=!1,void this.$Message.warning("请选中要添加的用户");this.userSelectList.forEach(t=>{let e={usermobile:t.usermobile,userid:t.userid,realname:t.realname,username:t.username};this.curNode.departmentid?(e.departmentid=this.curNode.departmentid,e.departmentname=this.curNode.departmentname):t.departments.length>0?(e.departmentid=t.departments[0].departmentid,e.departmentname=t.departments[0].departmentname):(e.departmentid=0,e.departmentname=""),1==this.addType?this.dayShift.push(e):this.eveningShift.push(e)}),this.visiable=!1},deleteUser(t,e,i){if(console.log(t),t.dutyid){var a=this;n.a.ajax({remark:"delDuty",data:{action:r.delDuty.action,condition:{companyid:m.companyid,productid:this.productid,dutyids:[t.dutyid]}},success(t){0===t.getret?(1==i?a.dayShift.splice(e,1):a.eveningShift.splice(e,1),a.getDataList()):a.$Message.error(t.msg||t.getmsg)}})}else 1==i?this.dayShift.splice(e,1):this.eveningShift.splice(e,1)},chooseUser(t){this.visiable=!0,this.addType=t,console.log(t),this.userSelectList=[],this.$refs.userTable.selectAll(!1),this.departmentTree[0].children.length<=0&&this.getDepartmentData()},saveDuty(){console.log(this.dayShift),console.log(this.eveningShift);let t=this.dayShift.filter(t=>!t.dutyid),e=this.eveningShift.filter(t=>!t.dutyid);console.log(t),console.log(e);let i=[];t.forEach(t=>{i.push({userid:t.userid,username:t.realname,dutyday:this.year+"-"+this.month+"-"+this.clickDay,dutytype:"1",departmentid:t.departmentid,departmentname:t.departmentname})}),e.forEach(t=>{i.push({userid:t.userid,username:t.realname,dutyday:this.year+"-"+this.month+"-"+this.clickDay,dutytype:"2",departmentid:t.departmentid,departmentname:t.departmentname})});let a={companyid:m.companyid,productid:this.productid,dutydata:i},d=this;n.a.ajax({remark:"addDuty",data:{action:r.addDuty.action,info:a},success(t){0===t.getret?(d.closeMaskPage(),d.getDataList()):d.$Message.error(t.msg||t.getmsg)}})},closeMaskPage(){a.default.obserable.trigger({type:"toggleMask",data:!1})},getDepartmentData(){let t=this,e={companyid:m.companyid,fatherid:0,status:1,page_index:0,page_size:1e3};n.a.ajax({remark:"getDepartmentList",data:{action:o.getDepartmentList.action,condition:e},success(e){if(t.loading=!1,0===e.getret){let i=[],a=void 0;e.list.forEach((t,e)=>{let n=0==e,d={title:t.departmentname,departmentid:t.departmentid,departmentname:t.departmentname,fatherid:t.fatherid,status:t.status,selected:n};i.push(d),n&&(a=d)}),t.departmentTree[0].children=i,t.curNode=a,t.getDepartmentUserData()}}})},departmentChange(t,e){this.curNode.departmentid==e.departmentid?e.selected=!0:($(".company-hone").removeClass("ivu-tree-title-selected"),this.curNode=e,this.getDepartmentUserData(),console.log(e))},getSelection(t){console.log(t),this.userSelectList=t},change(t){this.userCondition.page_index=t-1,this.getDepartmentUserData()},getDepartmentUserData(){let t=this,e=this.curNode.departmentid?o.getDepartmentUserList.action:o.getCompanyUserList.action,i=Object.assign({companyid:m.companyid,departmentid:this.curNode.departmentid},this.userCondition);t.userLoading=!0,t.userData=[],t.userTotal=0,n.a.ajax({remark:this.curNode.departmentid?"getDepartmentUserList":"getCompanyUserList",data:{action:e,condition:i},success(e){t.userLoading=!1,0===e.getret?(t.userData=e.list,t.userTotal=e.total):t.$Message.error(e.msg||e.getmsg)}})},dataChange(t,e){"month"===t?"add"===e?(this.month++,this.month>12&&(this.month=1)):(this.month--,this.month<1&&(this.month=12)):"add"===e?this.year++:this.year--,this.setMonth(this.year,this.month),this.monthdateCount=this.getDateByMonth(),this.currentWeekIndex=this.getCurrentWeekIndex(),this.weekIndexOfFirstDay=this.getCurrentWeekIndex(1),this.getDataList()},setMonth(t=(new Date).getFullYear(),e=(new Date).getMonth()+1){this.year=t,this.month=e},getCurrentWeekIndex(t){var{year:e,month:i}=this,a=new Date(e,i,0);return t&&(a.setYear(e),a.setMonth(i-1),a.setDate(1),a.setDate(t)),a.getDay()},getDateByMonth(){var{year:t,month:e}=this;return new Date(t,e,0).getDate()},formatDate(t,e){if(t){switch(e||(e="yyyy-MM-dd H:mm:ss"),typeof t){case"string":t=new Date(t.replace(/-/,"/"));break;case"number":t=new Date(t)}if(!(!t instanceof Date)){var i={yyyy:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),MM:(""+(t.getMonth()+101)).substr(1),dd:(""+(t.getDate()+100)).substr(1),HH:(""+(t.getHours()+100)).substr(1),mm:(""+(t.getMinutes()+100)).substr(1),ss:(""+(t.getSeconds()+100)).substr(1)};return e.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,(function(){return i[arguments[0]]}))}}}}},y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"zmiti-duty-main-ui lt-full"},[i("div",{staticClass:"zmiti-duty-left-table-C"},[i("header",{staticClass:"zmiti-tab-header"},[i("div",[t._v("值班一览表")]),t._v(" "),i("div",[i("Button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.goToToday}},[t._v("回到今天")]),t._v(" "),i("Button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.refresh}},[t._v("刷新")])],1)]),t._v(" "),i("div",{staticClass:"zmiti-duty-tip"},[i("span",[t._v("今日值班：")]),t._v("\n      白班：\n      "),t._l(t.curDayDuty,(function(e){return i("span",{key:e.dutyid},[t._v(t._s(e.realname))])})),t._v("\n      晚班：\n      "),t._l(t.curEveningDuty,(function(e){return i("span",{key:e.dutyid},[t._v(t._s(e.realname))])}))],2),t._v(" "),i("div",{staticClass:"zmiti-duty-table"},[i("header",[i("div",[i("span",{on:{click:function(e){return t.dataChange("year","reduce")}}},[i("Icon",{attrs:{type:"ios-arrow-back"}}),t._v(" "),i("Icon",{attrs:{type:"ios-arrow-back"}})],1),t._v(" "),i("span",{on:{click:function(e){return t.dataChange("month","reduce")}}},[i("Icon",{attrs:{type:"ios-arrow-back"}})],1)]),t._v(" "),i("div",[t._v(t._s(t.year)+"年"+t._s(t.month)+"月")]),t._v(" "),i("div",[i("span",{on:{click:function(e){return t.dataChange("month","add")}}},[i("Icon",{attrs:{type:"ios-arrow-forward"}})],1),t._v(" "),i("span",{on:{click:function(e){return t.dataChange("year","add")}}},[i("Icon",{attrs:{type:"ios-arrow-forward"}}),t._v(" "),i("Icon",{attrs:{type:"ios-arrow-forward"}})],1)])]),t._v(" "),i("ul",{staticClass:"zmiti-duty-datepicker"},[t._l(t.weeks,(function(e){return i("li",{key:e,staticClass:"zmiti-duty-week",staticStyle:{"font-weight":"bold","line-height":"40px",height:"40px"}},[t._v(t._s(e))])})),t._v(" "),t._l(t.datePicker,(function(e,a){return[t.weekIndexOfFirstDay<=a&&a-t.weekIndexOfFirstDay+1<=t.monthdateCount?i("li",{key:a,class:{active:a-t.weekIndexOfFirstDay+1===t.today&&t.year===t.currentYear&&t.month===t.currentMonth},on:{click:function(e){return t.getDetail(a)}}},[i("span",[t._v(t._s(a-t.weekIndexOfFirstDay+1))]),t._v(" "),t._l(t.dataSource.filter((function(e){return a-t.weekIndexOfFirstDay+1===new Date(1e3*e.dutyday).getDate()})),(function(e){return i("div",{key:e.dutyday,staticStyle:{position:"relative",top:"2px",height:"40px",overflow:"hidden"}},[e.data[0].list.length>0?i("div",{staticClass:"zmiti-datepicker-detail"},[t._v("\n                白班："),t._l(e.data[0].list,(function(e){return i("label",{key:e.dutyid},[t._v(t._s(e.realname))])}))],2):t._e(),t._v(" "),e.data[1].list.length>0?i("div",{staticClass:"zmiti-datepicker-detail"},[t._v("\n                晚班："),t._l(e.data[1].list,(function(e){return i("label",{key:e.dutyid},[t._v(t._s(e.realname))])}))],2):t._e()])}))],2):i("li",{key:a,class:{disabled:a-t.weekIndexOfFirstDay+1>t.monthdateCount||t.weekIndexOfFirstDay>a}},[t.weekIndexOfFirstDay>a?i("span",[t._v(t._s(new Date(t.year,t.month-1,0).getDate()+a-t.weekIndexOfFirstDay+1))]):i("span",[t._v(t._s(a-t.weekIndexOfFirstDay+1-t.monthdateCount))])])]}))],2)])]),t._v(" "),i("div",{staticClass:"zmiti-duty-right-setting"},[i("header",[i("span",{staticClass:"zmt_iconfont"},[t._v("")]),t._v("\n      "+t._s(t.year)+"年"+t._s(t.month)+"月值班详情表\n    ")]),t._v(" "),i("div",{staticClass:"zmiti-duty-list"},t._l(t.dataSource,(function(e){return i("div",{key:e.dutyday,staticClass:"zmiti-duty-item"},[i("div",{staticClass:"title"},[t._v(t._s(new Date(1e3*e.dutyday).getDate())+"日")]),t._v(" "),i("div",{staticClass:"detail"},[i("div",[t._v("白班：")]),t._v(" "),i("div",{staticClass:"duty-person"},t._l(e.data[0].list,(function(e){return i("div",{key:e.dutyid},[i("span",[t._v(t._s(e.realname))]),t._v(" "),i("span",[t._v(t._s(e.usermobile||""))]),t._v(" "),i("span",[t._v(t._s(e.departmentname))])])})),0)]),t._v(" "),i("div",{staticClass:"detail"},[i("div",[t._v("晚班：")]),t._v(" "),i("div",{staticClass:"duty-person"},t._l(e.data[1].list,(function(e){return i("div",{key:e.dutyid},[i("span",[t._v(t._s(e.realname))]),t._v(" "),i("span",[t._v(t._s(e.usermobile||""))]),t._v(" "),i("span",[t._v(t._s(e.departmentname))])])})),0)])])})),0)]),t._v(" "),i("ZmitiMask",{on:{closeMaskPage:t.closeMaskPage}},[i("div",{attrs:{slot:"mask-content"},slot:"mask-content"},[i("transition",{attrs:{name:"detail"}},[i("section",{staticClass:"zmiti-add-form zmiti-scroll"},[i("header",{staticClass:"zmiti-add-header"},[i("img",{attrs:{src:t.imgs.back,alt:""},on:{click:t.closeMaskPage}}),t._v(" "),i("span",[t._v(t._s(t.year+"年"+t.month+"月值班人员"))])]),t._v(" "),i("div",{staticClass:"zmiti-add-form-C"},[i("Row",{staticClass:"zmiti-add-form-item"},[i("Col",{attrs:{span:"24"}},[i("label",{attrs:{for:"白班"}},[t._v("白班")])])],1),t._v(" "),t.dayShift.length>0?t._l(t.dayShift,(function(e,a){return i("Row",{key:"day"+a,staticClass:"zmiti-add-form-item"},[i("Col",{attrs:{span:"20"}},[i("Input",{attrs:{value:e.realname+"("+(e.usermobile||"")+")--"+e.departmentname,disabled:""}})],1),t._v(" "),i("Col",{attrs:{span:"2"}},[i("Icon",{attrs:{type:"ios-remove-circle-outline",size:"26"},on:{click:function(i){return t.deleteUser(e,a,1)}}})],1),t._v(" "),i("Col",{attrs:{span:"2"}},[t.dayShift.length-1==a?i("Icon",{attrs:{type:"ios-add-circle-outline",size:"26"},on:{click:function(e){return t.chooseUser(1)}}}):t._e()],1)],1)})):[i("Row",{staticClass:"zmiti-add-form-item"},[i("Col",{attrs:{span:"20"}},[i("Input",{attrs:{disabled:""}})],1),t._v(" "),i("Col",{attrs:{span:"2"}},[i("Icon",{attrs:{type:"ios-add-circle-outline",size:"26"},on:{click:function(e){return t.chooseUser(1)}}})],1),t._v(" "),i("Col",{attrs:{span:"2"}})],1)],t._v(" "),i("Row",{staticClass:"zmiti-add-form-item"},[i("Col",{attrs:{span:"24"}},[i("label",{attrs:{for:"晚班"}},[t._v("晚班")])])],1),t._v(" "),t.eveningShift.length>0?t._l(t.eveningShift,(function(e,a){return i("Row",{key:"evening"+a,staticClass:"zmiti-add-form-item"},[i("Col",{attrs:{span:"20"}},[i("Input",{attrs:{value:e.realname+"("+(e.usermobile||"")+")--"+e.departmentname,disabled:""}})],1),t._v(" "),i("Col",{attrs:{span:"2"}},[i("Icon",{attrs:{type:"ios-remove-circle-outline",size:"26"},on:{click:function(i){return t.deleteUser(e,a,2)}}})],1),t._v(" "),i("Col",{attrs:{span:"2"}},[t.eveningShift.length-1==a?i("Icon",{attrs:{type:"ios-add-circle-outline",size:"26"},on:{click:function(e){return t.chooseUser(2)}}}):t._e()],1)],1)})):[i("Row",{staticClass:"zmiti-add-form-item"},[i("Col",{attrs:{span:"20"}},[i("Input",{attrs:{disabled:""}})],1),t._v(" "),i("Col",{attrs:{span:"2"}},[i("Icon",{attrs:{type:"ios-add-circle-outline",size:"26"},on:{click:function(e){return t.chooseUser(2)}}})],1),t._v(" "),i("Col",{attrs:{span:"2"}})],1)],t._v(" "),i("div",{staticClass:"zmiti-add-form-item zmiti-add-btns"},[i("Button",{attrs:{size:"large",type:"primary"},on:{click:t.saveDuty}},[t._v("保存")])],1)],2)])])],1)]),t._v(" "),i("Modal",{attrs:{title:"选择员工",width:"800",loading:t.loadingModal},on:{"on-ok":t.addUser},model:{value:t.visiable,callback:function(e){t.visiable=e},expression:"visiable"}},[i("div",{staticClass:"zmiti-department-usermodal"},[i("div",{staticClass:"zmiti-department-left"},[i("Tree",{ref:"departmentTree",attrs:{data:t.departmentTree},on:{"on-select-change":t.departmentChange}})],1),t._v(" "),i("div",{staticClass:"zmiti-department-right"},[i("ZmitiTable",{ref:"userTable",attrs:{height:342,loading:t.userLoading,dataSource:t.userData,columns:t.userColumns,change:t.change,current:t.userCondition.page_index+1,"page-size":t.userCondition.page_size,total:t.userTotal},on:{getSelection:t.getSelection}})],1)])])],1)};y._withStripped=!0;var p=i(3),h=!1;var f=function(t){h||(i(712),i(714))},g=Object(p.a)(c,y,[],!1,f,"data-v-b12f2d6c",null);g.options.__file="components\\Duty\\index\\index.vue";e.default=g.exports}}]);