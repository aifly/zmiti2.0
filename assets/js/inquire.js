(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{702:function(i,t,e){var a=e(703);"string"==typeof a&&(a=[[i.i,a,""]]),a.locals&&(i.exports=a.locals);(0,e(6).default)("479cf187",a,!1,{})},703:function(i,t,e){(i.exports=e(4)()).push([i.i,'\n.zmiti-inquire-main-ui[data-v-d4f4c932]{background:#f2f2f2;box-sizing:border-box;height:100%;width:99%;margin:0 auto\n}\n.zmiti-inquire-main-ui .zmiti-list-main[data-v-d4f4c932]{box-sizing:border-box;background:#fff;margin:0 auto\n}\n.zmiti-inquire-main-ui .zmiti-tabs-select[data-v-d4f4c932]{width:98%;margin:10px auto\n}\n.zmiti-inquire-main-ui .zmiti-list-where[data-v-d4f4c932]{font-size:14px;width:98%;margin:10px auto;display:flex;display:-webkit-flex;flex-flow:row\n}\n.zmiti-inquire-main-ui .zmiti-list-where .zmiti-search-dates[data-v-d4f4c932]{margin:0 10px\n}\n.zmiti-inquire-main-ui .zmiti-scroll[data-v-d4f4c932]{overflow:auto\n}\n.zmiti-inquire-main-ui .zmiti-submit-main[data-v-d4f4c932]{flex:5;-webkit-flex:5;width:100%\n}\n.zmiti-inquire-main-ui .zmiti-submit-main>div[data-v-d4f4c932]{-webkit-transition:.3s;transition:.3s\n}\n.zmiti-inquire-main-ui .zmiti-submit-main .zmiti-submit-table[data-v-d4f4c932]{width:98%;margin:0 auto\n}\n.zmiti-add-form[data-v-d4f4c932]{width:500px;overflow:auto;position:absolute !important;top:0;right:0;z-index:100;height:100%;box-shadow:0 0 0 1px #ccc;box-sizing:border-box;background:#f9f9f9\n}\n.zmiti-add-form .zmiti-add-form-C[data-v-d4f4c932]{margin:10px auto 2px;width:90%\n}\n.zmiti-add-form .zmiti-question[data-v-d4f4c932]{padding-top:10px\n}\n.zmiti-add-form .zmiti-question .question-title[data-v-d4f4c932]{margin-top:10px;font-size:16px\n}\n.zmiti-add-form .zmiti-question .question-title img[data-v-d4f4c932]{width:100px;height:100px;margin:5px 20px\n}\n.zmiti-add-form .zmiti-question .question-option[data-v-d4f4c932]{font-size:14px;margin:10px 0 10px 15px\n}\n.zmiti-add-form .zmiti-question .question-option img[data-v-d4f4c932]{width:50px;height:50px\n}\n.zmiti-add-form .zmiti-question .question-option div[data-v-d4f4c932]{display:flex;align-items:center;margin:5px 0\n}\n.zmiti-add-form .zmiti-question .question-option input[type="radio"][data-v-d4f4c932],.zmiti-add-form .zmiti-question .question-option input[type="checkbox"][data-v-d4f4c932]{width:16px;height:16px;margin-right:10px\n}\n.zmiti-add-form .zmiti-add-form-item[data-v-d4f4c932]{line-height:50px;height:50px\n}\n.zmiti-add-form .zmiti-add-form-item.zmiti-add-btns[data-v-d4f4c932]{text-align:center;position:relative;z-index:10\n}\n.zmiti-add-form .zmiti-add-form-item.zmiti-add-btns button[data-v-d4f4c932]{margin:0 20px;padding:2px 20px\n}\n.zmiti-add-form .zmiti-add-form-item input[data-v-d4f4c932]{padding-left:6px;height:32px;width:70%;border:1px solid #d8d8d8;outline:none\n}\n',""])},744:function(i,t,e){"use strict";e.r(t);var a=e(0),n=e(2),r=e(9),o=e(10),s={props:["obserable"],name:"inquireindex",data(){let i=(i,t,e)=>{if(!t)return e(new Error("请输入问卷调查开始/结束时间"));var a=new Date(t);return"begintime"==i.fullField&&""!=this.formObj.endtime&&a.getTime()>=new Date(this.formObj.endtime).getTime()?e(new Error("问卷调查开始时间不能大于结束时间")):"endtime"==i.fullField&&""!=this.formObj.begintime&&a.getTime()<=new Date(this.formObj.begintime).getTime()?e(new Error("问卷调查结束时间不能小于开始时间")):e()};return{showDetailPage:-1,imgs:window.imgs,inquireActions:n.a.inquireActions,company:n.a.getCurrentCompanyId(),total:0,loading:!1,viewH:window.innerHeight,productid:0,nameSearch:"",beginTimeSearch:0,endTimeSearch:0,formObj:{inquireid:void 0,inquiretitle:"",isrealname:0,begintime:"",endtime:"",abstract:""},ruleValidate:{inquiretitle:[{required:!0,message:"请输入问卷调查名称",trigger:"blur"}],begintime:[{required:!0,validator:i,trigger:"change"}],endtime:[{required:!0,validator:i,trigger:"change"}]},columns:[{title:"问卷标题",key:"inquiretitle",align:"center"},{title:"开始时间",key:"begintime",align:"center",render:(i,t)=>i("div",{},n.a.formatDate(t.row.begintime))},{title:"结束时间",key:"endtime",align:"center",render:(i,t)=>i("div",{},n.a.formatDate(t.row.endtime))},{title:"是否实名",key:"isrealname",align:"center",render:(i,t)=>i("div",{},1==t.row.isrealname?"实名":"匿名")},{title:"描述",width:200,key:"abstract",align:"center"},{title:"创建时间",key:"createtime",align:"center",render:(i,t)=>i("div",{},n.a.formatDate(t.row.createtime))},{title:"操作",key:"action",align:"center",width:220,render:(i,t)=>i("div",[i("span",{style:{cursor:"pointer",color:"rgb(0, 102, 204)"},on:{click:()=>{this.formObj={inquireid:t.row.inquireid,inquiretitle:t.row.inquiretitle,isrealname:t.row.isrealname,begintime:new Date(1e3*t.row.begintime),endtime:new Date(1e3*t.row.endtime),abstract:t.row.abstract},a.default.obserable.trigger({type:"toggleMask",data:!0})}}},"编辑"),i("span",{style:{cursor:"pointer",color:"rgb(0, 102, 204)",marginLeft:"10px"},on:{click:()=>{this.$router.push({name:"inquirequestionlist",params:{productid:this.productid,id:t.row.inquireid,title:t.row.inquiretitle}})}}},"设计问卷"),i("span",{style:{cursor:"pointer",color:"rgb(0, 102, 204)",marginLeft:"10px"},on:{click:()=>{this.$router.push({name:"inquireuserlist",params:{productid:this.productid,id:t.row.inquireid,title:t.row.inquiretitle}})}}},"答卷分析"),i("Poptip",{props:{confirm:!0,title:"确定要删除吗？",placement:"left"},on:{"on-ok":()=>{this.delete(t.row.inquireid)}}},[i("span",{props:{type:"error",size:"small"},style:{cursor:"pointer",color:"#06C",marginLeft:"10px"},on:{click:()=>{}}},"删除")])])}],dataSource:[],condition:{page_index:0,page_size:10}}},components:{ZmitiTable:r.a,ZmitiMask:o.a},mounted(){this.init()},methods:{init(){n.a.getUserInfo()||this.$router.push({path:"/login"});var i=setInterval(()=>{a.default.productList&&(clearInterval(i),this.productid||(a.default.productList.forEach(i=>{this.$route.name.indexOf(i.producturl.substr(1))>-1&&(this.productid=i.productid)}),this.productid&&this.getDataList()))},200)},selectDates(i){this.beginTimeSearch=Date.parse(new Date(i[0]))/1e3,this.endTimeSearch=Date.parse(new Date(i[1]))/1e3},searchHandle(){this.condition.page_index=0,this.getDataList()},getDataList(){let i=this;i.loading=!0;let t=Object.assign({companyid:this.company.companyid,productid:this.productid,inquiretitle:this.nameSearch,begintime:this.beginTimeSearch,endtime:this.endTimeSearch},this.condition);n.a.ajax({remark:"getInquireList",data:{action:this.inquireActions.getInquireList.action,condition:t},error(){i.loading=!1},success(t){i.loading=!1,0===t.getret&&(i.total=t.total,i.dataSource=t.list)}})},change(i){this.condition.page_index=i-1,this.getDataList()},delete(i){var t=this;n.a.ajax({remark:"delInquire",data:{action:this.inquireActions.delInquire.action,info:{inquireid:i,companyid:this.company.companyid,productid:this.productid}},success(i){t.$Message[0===i.getret?"success":"error"](i.msg||i.getmsg),0===i.getret&&t.getDataList()}})},add(){a.default.obserable.trigger({type:"toggleMask",data:!0})},closeMaskPage(){this.$refs.ruleForm.resetFields(),this.formObj.inquireid=void 0,a.default.obserable.trigger({type:"toggleMask",data:!1})},adminAction(i){this.$refs[i].validate(i=>{if(i){let i=this.formObj.inquireid?this.inquireActions.editInquire.action:this.inquireActions.addInquire.action,t={productid:this.productid,companyid:this.company.companyid,inquiretitle:this.formObj.inquiretitle,isrealname:this.formObj.isrealname,abstract:this.formObj.abstract,begintime:new Date(this.formObj.begintime).getTime()/1e3,endtime:new Date(this.formObj.endtime).getTime()/1e3};this.formObj.inquireid&&(t.inquireid=this.formObj.inquireid);let e=this;n.a.ajax({remark:this.formObj.inquireid?"editInquire":"addInquire",data:{action:i,info:t},success(i){e.$Message[0===i.getret?"success":"error"](i.msg||i.getmsg),e.closeMaskPage(),0===i.getret&&e.getDataList()}})}})}}},d=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"zmiti-inquire-main-ui lt-full"},[e("div",{staticClass:"zmiti-list-main"},[e("header",{staticClass:"zmiti-tab-header"},[e("div",[i._v("问卷调查")]),i._v(" "),e("div",[e("Button",{attrs:{loading:i.loading,type:"primary"},on:{click:function(t){return i.getDataList()}}},[i._v("刷新")]),i._v(" "),e("Button",{attrs:{type:"primary"},on:{click:function(t){return i.add()}}},[i._v("添加")])],1)]),i._v(" "),e("div",{staticClass:"zmiti-submit-main zmiti-scroll",style:{height:i.viewH-130+"px"}},[e("section",{staticClass:"zmiti-list-where"},[e("Input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入调察问卷名称"},model:{value:i.nameSearch,callback:function(t){i.nameSearch=t},expression:"nameSearch"}}),i._v(" "),e("div",{staticClass:"zmiti-search-dates"},[e("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange","start-date":new Date,placement:"bottom-end",placeholder:"选择时间段"},on:{"on-change":i.selectDates}})],1),i._v(" "),e("Button",{attrs:{icon:"md-search"},on:{click:i.searchHandle}},[i._v("搜索")])],1),i._v(" "),e("ZmitiTable",{attrs:{loading:i.loading,dataSource:i.dataSource,columns:i.columns,change:i.change,current:i.condition.page_index+1,"page-size":i.condition.page_size,total:i.total}})],1)]),i._v(" "),e("ZmitiMask",{on:{closeMaskPage:i.closeMaskPage},model:{value:i.showDetailPage,callback:function(t){i.showDetailPage=t},expression:"showDetailPage"}},[e("div",{attrs:{slot:"mask-content"},slot:"mask-content"},[e("transition",{attrs:{name:"detail"}},[e("section",{staticClass:"zmiti-add-form zmiti-scroll"},[e("header",{staticClass:"zmiti-add-header"},[e("img",{attrs:{src:i.imgs.back,alt:""},on:{click:i.closeMaskPage}}),i._v(" "),e("span",[i._v("调查问卷信息")])]),i._v(" "),e("Form",{ref:"ruleForm",staticClass:"zmiti-add-form-C",attrs:{model:i.formObj,"label-width":120,rules:i.ruleValidate}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.formObj.inquireid,expression:"formObj.inquireid"}],attrs:{type:"hidden"},domProps:{value:i.formObj.inquireid},on:{input:function(t){t.target.composing||i.$set(i.formObj,"inquireid",t.target.value)}}}),i._v(" "),e("FormItem",{attrs:{label:"问卷标题：",prop:"inquiretitle"}},[e("Input",{attrs:{placeholder:"活动名称"},model:{value:i.formObj.inquiretitle,callback:function(t){i.$set(i.formObj,"inquiretitle",t)},expression:"formObj.inquiretitle"}})],1),i._v(" "),e("FormItem",{attrs:{label:"开始时间：",prop:"begintime"}},[e("DatePicker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"开始时间"},model:{value:i.formObj.begintime,callback:function(t){i.$set(i.formObj,"begintime",t)},expression:"formObj.begintime"}})],1),i._v(" "),e("FormItem",{attrs:{label:"结束时间：",prop:"endtime"}},[e("DatePicker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"结束时间"},model:{value:i.formObj.endtime,callback:function(t){i.$set(i.formObj,"endtime",t)},expression:"formObj.endtime"}})],1),i._v(" "),e("FormItem",{attrs:{label:"是否实名：",prop:"isrealname"}},[e("RadioGroup",{model:{value:i.formObj.isrealname,callback:function(t){i.$set(i.formObj,"isrealname",t)},expression:"formObj.isrealname"}},[e("Radio",{attrs:{label:0}},[i._v("否")]),i._v(" "),e("Radio",{attrs:{label:1}},[i._v("是")])],1)],1),i._v(" "),e("FormItem",{attrs:{label:"描述：",prop:"abstract"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:i.formObj.abstract,callback:function(t){i.$set(i.formObj,"abstract",t)},expression:"formObj.abstract"}})],1)],1),i._v(" "),e("div",{staticClass:"zmiti-add-form-item zmiti-add-btns"},[e("Button",{attrs:{size:"large",type:"primary"},on:{click:function(t){return i.adminAction("ruleForm")}}},[i._v(i._s(i.formObj.infoid?"保存":"确定"))])],1)],1)])],1)])],1)};d._withStripped=!0;var m=e(3),l=!1;var c=function(i){l||e(702)},u=Object(m.a)(s,d,[],!1,c,"data-v-d4f4c932",null);u.options.__file="components\\inquire\\index\\index.vue";t.default=u.exports}}]);