(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{39:function(e,r,t){"use strict";t.d(r,"c",(function(){return p})),t.d(r,"h",(function(){return i})),t.d(r,"e",(function(){return n})),t.d(r,"a",(function(){return s})),t.d(r,"b",(function(){return d})),t.d(r,"d",(function(){return l})),t.d(r,"g",(function(){return m})),t.d(r,"f",(function(){return o}));var i={0:"财务类",1:"会员账号",2:"定制服务类",3:"产品技术类",4:"其它类"};let o={0:{status:"女"},1:{status:"男"}},n={0:{status:"已禁用"},1:{status:"已受理"},2:{status:"已处理"},3:{status:"已确认"},4:{status:"已评价"}},a=[{name:"全部",type:-1},{name:"图片",type:0},{name:"视频",type:1},{name:"音频",type:2},{name:"文本",type:3}],s=(e=3)=>[{name:"系统",icon:"&#xe611;",id:1},{name:"单位",icon:"&#xe612;",id:2},{name:"个人",icon:"&#xe613;",id:e,cateList:a.concat([])}],d={pdf:"&#xe665;",xls:"&#xe614;",xlsx:"&#xe614;",mp3:"&#xe7df;",ogg:"&#xe7df;",m4a:"&#xe7df;",doc:"&#xe63c;",docx:"&#xe63c;",mp4:"&#xe601;",webm:"&#xe601;",mov:"&#xe601;",flv:"&#xe601;",other:"&#xe606;"},l=[{name:"待审核",icon:"&#xe6bc;",color:"#fbec00"},{name:"审核通过",icon:"&#xe61b;",color:"#45b203"},{name:"拒绝",icon:"&#xe61e;",color:"#ff4664"},{name:"暂缓",icon:"&#xe61f;",color:"#ffce01"}],m=["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30"],p=["resourcelist","workorder","workorderlist","home","myself"]},576:function(e,r,t){var i=t(577);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,t(6).default)("08d5c85e",i,!1,{})},577:function(e,r,t){(r=e.exports=t(4)()).i(t(578),""),r.push([e.i,"\n",""])},578:function(e,r,t){(e.exports=t(4)()).push([e.i,".zmiti-upload-before {\n  height: 40px;\n  line-height: 40px;\n  font-size: 14px;\n  text-indent: 1em;\n  border-bottom: 1px solid #f2f2f2;\n  position: relative;\n  cursor: pointer;\n  border: 1px solid red;\n  position: absolute;\n  top: 0px;\n  opacity: 0;\n}\n\n.zmiti-upload-before input {\n  margin-left: -20px;\n  cursor: pointer;\n}\n\n.zmiti-upload-before > div:nth-of-type(2) {\n  cursor: pointer;\n  border: 1px solid red;\n  width: 80px !important;\n  height: 40px !important;\n}\n\n.zmiti-workorder-main-ui {\n  background: #fff;\n  padding: 10px;\n}\n\n.zmiti-workorder-main-ui .zmiti-upload-view {\n  position: absolute;\n  height: 100px;\n  width: 88%;\n  right: 0;\n  top: 0;\n  display: flex;\n  display: -webkit-flex;\n  flex-flow: row;\n}\n\n.zmiti-workorder-main-ui .zmiti-upload-view .zmiti-upload-item {\n  border: 1px solid #ccc;\n  width: 100px;\n  text-align: center;\n  line-height: 100px;\n  overflow: hidden;\n}\n\n.zmiti-workorder-main-ui .zmiti-upload-view .zmiti-upload-item img {\n  width: auto;\n  height: auto;\n  max-width: 100%;\n  max-height: 100%;\n}\n\n.zmiti-workorder-main-ui .zmiti-upload-view .wm-news-encryptfile-progressbar {\n  border: 1px solid #fab82e;\n  display: block;\n  height: 25px;\n  line-height: 25px;\n  position: relative;\n  border-radius: 11px;\n  overflow: hidden;\n  text-align: center;\n}\n\n.zmiti-workorder-main-ui .zmiti-upload-view .wm-news-encryptfile-progressbar label {\n  position: relative;\n  z-index: 10;\n}\n\n.zmiti-workorder-main-ui .zmiti-upload-view .wm-news-encryptfile-progressbar span {\n  position: absolute;\n  width: 99.5%;\n  height: 20px;\n  left: 0;\n  top: 0;\n  border-radius: 10px;\n  margin: 1px;\n  -webkit-transform: translate3d(-100%, 0, 0);\n  transform: translate3d(-100%, 0, 0);\n  background-size: 3em 3em;\n  background-image: linear-gradient(-45deg, transparent 0em, transparent 0.8em, rgba(250, 184, 46, 0.7) 0.9em, rgba(250, 184, 46, 0.7) 2.1em, transparent 2.1em, transparent 2.9em, rgba(250, 184, 46, 0.7) 3.1em);\n  -webkit-animation: warning-animation 750ms infinite linear;\n  -moz-animation: warning-animation 750ms infinite linear;\n  animation: warning-animation 750ms infinite linear;\n}\n\n.zmiti-workorder-main-ui .zmiti-upload-view .wm-news-encryptfile-progressbar span:before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 100%;\n  background-image: linear-gradient(to bottom, rgba(250, 184, 46, 0.7), rgba(250, 184, 46, 0.7) 15%, transparent 60%, rgba(250, 184, 46, 0.7));\n}\n\n@-webkit-keyframes warning-animation {\n  0% {\n    background-position: 0 0;\n  }\n  100% {\n    background-position: 3em 0;\n  }\n}\n\n@keyframes warning-animation {\n  0% {\n    background-position: 0 0;\n  }\n  100% {\n    background-position: 3em 0;\n  }\n}\n\n.zmiti-workorder-main-ui .zmiti-workorder-choose {\n  width: 100%;\n  border: 1px solid #ccc;\n  margin-top: 10px;\n  padding: 10px;\n  padding-bottom: 20px;\n}\n\n.zmiti-workorder-main-ui .zmiti-workorder-choose .zmiti-workorder-header-bar {\n  text-indent: 1em;\n  font-size: 14px;\n  position: relative;\n  height: 40px;\n  border: 1px solid #f5f6fa;\n  background: #f5f6fa;\n  line-height: 40px;\n}\n\n.zmiti-workorder-main-ui .zmiti-workorder-choose .zmiti-workorder-header-bar:before {\n  content: '';\n  left: 0;\n  top: 0;\n  height: 100%;\n  width: 4px;\n  background: #333;\n  position: absolute;\n}\n\n.zmiti-workorder-main-ui .zmiti-workorder-choose > ul {\n  margin-top: 30px;\n  display: flex;\n  display: -webkit-flex;\n  flex-flow: row;\n  flex-wrap: wrap;\n  -webkit-flex-wrap: wrap;\n}\n\n.zmiti-workorder-main-ui .zmiti-workorder-choose > ul li {\n  margin: 5px 10px;\n}\n\n.zmiti-workorder-main-ui .zmiti-workorder-choose > ul .zmiti-workerorder-type-top {\n  justify-content: space-between;\n  -webkit-justify-content: space-between;\n  align-items: center;\n  display: flex;\n  display: -webkit-flex;\n  flex-flow: row;\n  line-height: 50px;\n  padding: 0;\n}\n\n.zmiti-workorder-main-ui .zmiti-workorder-choose > ul .zmiti-workerorder-type-top.zmiti-workerorder-type-top1 {\n  padding: 0 20px;\n  box-sizing: border-box;\n  min-width: 250px;\n}\n",""])},745:function(e,r,t){"use strict";t.r(r);var i=t(2),o=t(39),n=i.a.userActions,a={props:["obserable"],name:"zmitiindex",data:()=>({currentClassId:-1,productionList:[],resourceList:[],resourceCondition:{page_index:0,page_size:15,filetype:"图片"},formWorkOrder:{workordertype:-1,smstime:2,productid:""},imgs:window.imgs,userinfo:{username:"一位巨蟹",avatar:window.imgs.zmiti1},ruleValidate:{content:[{required:!0,message:"问题描述不能为空",trigger:"blur"}],usermobile:[{required:!0,message:"手机号不能为空",trigger:"blur"}]},workOrderType:[{type:"财务类",desc:"订单，合同，充值，发票，汇款，等与资金相关问题"},{type:"会员帐号类",desc:"更换用户信息，找回密码，空间，到期时间，用户数等相关"},{type:"定制服务类",desc:"个性化定制，设计，规划及相关服务类问题"},{type:"产品技术类",desc:"现有产品的所有技术相关问题及接口类问题"},{type:"其它类",desc:"您无法判断的所有问题都可以此选择提问"}]}),components:{},beforeCreate(){window.s=this},watch:{},mounted(){this.getProductList()},methods:{upload(){var{isAdmin:e,$Message:r}=this,t=this,n=i.a[e?"getAdminUserInfo":"getUserInfo"](),{userid:a,token:s}=n.ui,d={userid:a,token:s,fileclassid:t.currentClassId,usertype:2,partsize:10485760,companyid:"",verify_key:"25c1c1f3597bc5b258bd68be8804576e",classtype:Object(o.a)()[2].id,file_token:Math.random().toString(36).substr(2)};t.uploader;var l=WebUploader.create({auto:!0,server:"http://file.zmiti.com/index/upload/upload_file",pick:".zmiti-upload-before",chunkSize:10485760,chunked:!0,threads:1,method:"POST",compress:!1,prepareNextFile:!0,formData:d,thumb:{quality:100,allowMagnify:!0,crop:!0,type:"image/jpeg"},fileSizeLimit:5120,accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png,tiff,tif",mimeTypes:"image/*"},disableGlobalDnd:!0});t.uploader=l;l.on("fileQueued",(function(e){0,t.isUpLoading=!0,t.resourceList.unshift({fileid:e.id,filetitle:e.name.split(".")[0],checked:!1,process:0,fileextname:"gif",filepath:"./assets/images/poster.gif"})})),l.on("error",(function(e){"Q_TYPE_DENIED"==e||"Q_EXCEED_SIZE_LIMIT"==e&&t.$Modal.error({title:"错误提示",content:"文件过大（最大5M）"})}));l.on("uploadProgress",(function(e,r){var i=100*r|0;t.resourceList.forEach((r,o)=>{r.fileid===e.id&&(o,r.process=i,i>=100&&(t.resourceCondition.page_index=0,setTimeout(()=>{r.filepath=t.formWorkOrder.attachment},100)))}),console.log(t.resourceList)}));l.on("uploadSuccess",(function(e,r){0===r.getret?t.formWorkOrder.attachment=window.config.host+r.info.filepath:t.$Modal.error({title:"错误提示",content:r.msg})})),l.on("uploadError",(function(e){console.log("error"),t.$Message.error("文件上传超时，请刷新重试")})),l.on("uploadComplete",(function(e,r){}))},chooseOrderType(e,r){"product"===e?(this.formWorkOrder.productid=r.productid,this.formWorkOrder.workordertype=-2):this.formWorkOrder.workordertype=r,this.$nextTick(()=>{this.upload()})},getProductList(){i.a.getProductList(e=>{0===e.getret&&(this.productionList=e.list)})},submitWorkOrder(){-2===this.formWorkOrder.workordertype&&delete this.formWorkOrder.workordertype;var{$Message:e}=this;i.a.ajax({remark:"userCommitWorkOrder",data:{action:n.userCommitWorkOrder.action,info:this.formWorkOrder},success(r){e[0===r.getret?"success":"error"](r.msg),setTimeout(()=>{window.location.hash="/workorderlist"},1e3)}})}}},s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"zmiti-workorder-main-ui lt-full"},[e._m(0),e._v(" "),t("div",{staticClass:"zmiti-workorder-choose"},[t("header",{staticClass:"zmiti-workorder-header-bar"},[e._v("\n\t\t\t"+e._s(-2===e.formWorkOrder.workordertype?"产品":"咨询")+"类工单问题\n\t\t")]),e._v(" "),e.formWorkOrder.workordertype<=-1&&!e.formWorkOrder.productid?[t("ul",e._l(e.workOrderType,(function(r,i){return t("li",{key:i},[t("div",{staticClass:"zmiti-workerorder-type-top"},[t("div",[e._v(e._s(r.type))]),e._v(" "),t("div",[t("Button",{on:{click:function(r){return e.chooseOrderType("other",i)}}},[e._v("提问")])],1)]),e._v(" "),t("div",[e._v("\n\t\t\t\t\t\t"+e._s(r.desc)+"\n\t\t\t\t\t")])])})),0),e._v(" "),t("header",{staticClass:"zmiti-workorder-header-bar",staticStyle:{"margin-top":"30px"}},[e._v("\n\t\t\t\t产品类型工单问题\n\t\t\t")]),e._v(" "),t("ul",e._l(e.productionList,(function(r,i){return t("li",{key:i,staticStyle:{background:"#eee"}},[t("div",{staticClass:"zmiti-workerorder-type-top zmiti-workerorder-type-top1"},[t("div",{staticStyle:{"margin-right":"30px"}},[e._v(e._s(r.productname))]),e._v(" "),t("div",[t("Button",{on:{click:function(t){return e.chooseOrderType("product",r)}}},[e._v("提问")])],1)]),e._v(" "),t("div",[e._v("\n\t\t\t\t\t\t"+e._s(r.desc)+"\n\t\t\t\t\t")])])})),0)]:t("Form",{staticClass:"zmiti-add-form-C",staticStyle:{"padding-top":"20px",width:"90%",margin:"0 auto"},attrs:{rules:e.ruleValidate,model:e.formWorkOrder,"label-width":100}},[t("FormItem",{attrs:{label:"问题描述：",prop:"content"}},[t("Input",{attrs:{rows:4,type:"textarea",placeholder:"问题描述："},model:{value:e.formWorkOrder.content,callback:function(r){e.$set(e.formWorkOrder,"content",r)},expression:"formWorkOrder.content"}})],1),e._v(" "),t("FormItem",{attrs:{label:"手机号：",prop:"usermobile"}},[t("Input",{attrs:{placeholder:"手机号："},model:{value:e.formWorkOrder.usermobile,callback:function(r){e.$set(e.formWorkOrder,"usermobile",r)},expression:"formWorkOrder.usermobile"}})],1),e._v(" "),t("FormItem",{attrs:{label:"接收短信时间："}},[t("RadioGroup",{model:{value:e.formWorkOrder.smstime,callback:function(r){e.$set(e.formWorkOrder,"smstime",r)},expression:"formWorkOrder.smstime"}},[t("Radio",{attrs:{label:0}},[e._v("任意时间")]),e._v(" "),t("Radio",{attrs:{label:1}},[e._v("每天9点~18点")]),e._v(" "),t("Radio",{attrs:{label:2}},[e._v("从不接收")])],1)],1),e._v(" "),t("FormItem",{attrs:{label:"邮箱：",prop:"useremail"}},[t("Input",{attrs:{placeholder:"邮箱："},model:{value:e.formWorkOrder.useremail,callback:function(r){e.$set(e.formWorkOrder,"useremail",r)},expression:"formWorkOrder.useremail"}})],1),e._v(" "),t("FormItem",{attrs:{label:"附件上传："}},[t("Button",{attrs:{icon:"md-cloud-upload"}},[e._v("上传")]),e._v(" "),t("div",{staticClass:"zmiti-upload-before"}),e._v(" "),t("div",{staticClass:"zmiti-upload-view"},e._l(e.resourceList,(function(r,i){return t("div",{key:i,staticClass:"zmiti-upload-item"},[r.filepath?t("img",{attrs:{src:r.filepath,alt:""}}):e._e(),e._v(" "),r.process<100?t("span",{staticClass:"wm-news-encryptfile-progressbar"},[t("label",[e._v(e._s(r.process)+"%")]),e._v(" "),t("span",{style:{WebkitTransform:"translate3d("+(r.process-100)+"%,0,0)"}})]):e._e()])})),0)],1),e._v(" "),t("FormItem",{attrs:{label:""}},[t("Button",{attrs:{type:"primary"},on:{click:e.submitWorkOrder}},[e._v("提交")])],1)],1)],2)])};s._withStripped=!0;var d=t(3),l=!1;var m=function(e){l||t(576)},p=Object(d.a)(a,s,[function(){var e=this.$createElement,r=this._self._c||e;return r("header",{staticClass:"zmiti-tab-header"},[r("div",[this._v("提交工单")]),this._v(" "),r("div")])}],!1,m,"data-v-0e1afbdb",null);p.options.__file="components\\workorder\\index.vue";r.default=p.exports}}]);