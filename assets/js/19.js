(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{113:function(a,i,t){var n=t(114);"string"==typeof n&&(n=[[a.i,n,""]]),n.locals&&(a.exports=n.locals);(0,t(6).default)("bf20c822",n,!1,{})},114:function(a,i,t){(a.exports=t(2)()).push([a.i,'/*.ant-btn:focus, .ant-btn:hover,.ant-input:focus, .ant-input:hover {\r\n    background-color: #fff;\r\n    border-color: #bf1616;\r\n    box-shadow: 0 0 0 2px rgba(191, 22, 22, 0.1);\r\n}*/\n.zmiti-company-main-ui[data-v-15c9be30] {\n  background: #f2f2f2;\n  box-sizing: border-box;\n  height: 100%;\n  width: 99%;\n  margin: 0 auto;\n}\n.zmiti-company-main-ui .zmiti-avatar-list[data-v-15c9be30] {\n    display: flex;\n    display: -webkit-flex;\n    flex-flow: row;\n}\n.zmiti-company-main-ui .zmiti-avatar-list span[data-v-15c9be30] {\n      font-size: 40px;\n      margin-right: 20px;\n      cursor: pointer;\n}\n.zmiti-company-main-ui .zmiti-avatar-list span.active[data-v-15c9be30] {\n        color: #3390ff;\n}\n.zmiti-company-main-ui .ivu-table-wrapper[data-v-15c9be30] {\n    border-bottom: none;\n    border-right: none;\n}\n.zmiti-company-main-ui .zmiti-list-main[data-v-15c9be30] {\n    box-sizing: border-box;\n    background: #fff;\n    margin: 0 auto;\n    flex: 2;\n    -webkit-flex: 2;\n    position: relative;\n    top: 5px;\n    display: flex;\n    display: -webkit-flex;\n    flex-flow: column;\n}\n.zmiti-company-main-ui .zmiti-list-main[data-v-15c9be30]:before {\n      content: "";\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      left: 0;\n      top: 0;\n      box-shadow: 0 0 0 1px #ccc;\n}\n.zmiti-company-main-ui .zmiti-list-main .zmiti-add-form-close[data-v-15c9be30] {\n      z-index: 100;\n}\n.zmiti-company-main-ui .zmiti-list-main > div[data-v-15c9be30] {\n      margin: 10px auto 10px;\n      position: relative;\n      flex: 1;\n      -webkit-flex: 1;\n}\n.zmiti-company-main-ui .zmiti-list-main > div .zmiti-meet-form[data-v-15c9be30] {\n        width: 100%;\n        margin: 0px auto;\n        padding: 20px 40px;\n        height: 600px;\n        overflow: auto;\n}\n.zmiti-company-main-ui .zmiti-list-main .zmiti-list-where[data-v-15c9be30] {\n      width: 98%;\n      margin: 10px auto 0;\n      height: 40px;\n      line-height: 40px;\n      font-size: 14px;\n      position: relative;\n      z-index: 10;\n}\n.zmiti-company-main-ui .zmiti-list-main .zmiti-list-where input[data-v-15c9be30] {\n        height: 30px;\n}\n.zmiti-company-main-ui .zmiti-list-main .zmiti-company-main[data-v-15c9be30] {\n      flex: 5;\n      -webkit-flex: 5;\n      width: 100%;\n}\n.zmiti-company-main-ui .zmiti-list-main .zmiti-company-main > div[data-v-15c9be30] {\n        -webkit-transition: 0.3s;\n        transition: 0.3s;\n}\n.zmiti-company-main-ui .zmiti-list-main .zmiti-company-main .zmiti-company-table[data-v-15c9be30] {\n        width: 98%;\n        margin: 0 auto;\n}\n.zmiti-company-main-ui .lt-full[data-v-15c9be30] {\n    position: fixed !important;\n    background: rgba(0, 0, 0, 0.5);\n    z-index: 1001;\n    overflow: hidden;\n}\n.zmiti-company-main-ui .lt-full .zmiti-left-pannel[data-v-15c9be30] {\n      position: absolute;\n      width: 100%;\n      height: 100px;\n      left: 0;\n      top: 0;\n      z-index: 10;\n}\n.zmiti-company-main-ui .zmiti-add-form[data-v-15c9be30] {\n    flex: 1;\n    -webkit-flex: 1;\n    width: 500px;\n    overflow: auto;\n    position: absolute !important;\n    top: 0;\n    right: 0;\n    z-index: 100;\n    height: 100%;\n    position: relative;\n    box-shadow: 0 0 0 1px #ccc;\n    box-sizing: border-box;\n    background: #f9f9f9;\n}\n.zmiti-company-main-ui .zmiti-add-form .zmiti-safe-content[data-v-15c9be30] {\n      display: flex;\n      display: -webkit-flex;\n      flex-flow: row;\n      -webkit-align-items: center;\n      align-items: center;\n      margin-top: 30px;\n      justify-content: space-around;\n      -webkit-justify-content: space-around;\n      border: 1px dashed #ccc;\n      padding: 10px 0;\n}\n.zmiti-company-main-ui .zmiti-add-form .zmiti-safe-content > div[data-v-15c9be30]:nth-of-type(1) {\n        text-align: center;\n        width: 120px;\n        font-weight: bold;\n}\n.zmiti-company-main-ui .zmiti-add-form .zmiti-safe-content > div[data-v-15c9be30]:nth-of-type(2) {\n        flex: 1;\n        -webkit-flex: 1;\n}\n.zmiti-company-main-ui .zmiti-add-form .zmiti-safe-content > div[data-v-15c9be30]:nth-of-type(3) {\n        width: 80px;\n        cursor: pointer;\n        text-align: center;\n        color: #0066cc;\n}\n.zmiti-company-main-ui .zmiti-add-form.detail-enter-active[data-v-15c9be30], .zmiti-company-main-ui .zmiti-add-form.detail-leave-active[data-v-15c9be30] {\n      -webkit-transition: 0.2s;\n      transition: 0.2s;\n}\n.zmiti-company-main-ui .zmiti-add-form.detail-enter[data-v-15c9be30], .zmiti-company-main-ui .zmiti-add-form.detail-leave-to[data-v-15c9be30] {\n      -webkit-transform: translateX(100%);\n      transform: translateX(100%);\n}\n.zmiti-company-main-ui .zmiti-add-form .zmiti-company-avatar[data-v-15c9be30] {\n      background: rgba(51, 144, 255, 0.1);\n      border-radius: 50%;\n      text-align: center;\n      width: 80px;\n      height: 80px;\n      line-height: 80px;\n      margin: 0 auto 30px;\n      cursor: pointer;\n      position: relative;\n}\n.zmiti-company-main-ui .zmiti-add-form .zmiti-company-avatar label[data-v-15c9be30] {\n        position: absolute;\n        bottom: -50px;\n        font-size: 12px;\n        width: 100%;\n        text-align: center;\n        left: 0;\n}\n.zmiti-company-main-ui .zmiti-add-form .zmiti-company-avatar span[data-v-15c9be30] {\n        font-size: 40px;\n        color: rgba(51, 144, 255, 0.8);\n}\n.zmiti-company-main-ui .zmiti-add-form .zmiti-add-form-C[data-v-15c9be30] {\n      margin: 10px auto 2px;\n      width: 90%;\n}\n.zmiti-company-main-ui .zmiti-add-form .zmiti-add-form-item[data-v-15c9be30] {\n      line-height: 50px;\n      height: 50px;\n}\n.zmiti-company-main-ui .zmiti-add-form .zmiti-add-form-item.zmiti-add-btns[data-v-15c9be30] {\n        text-align: center;\n        position: relative;\n        z-index: 10;\n}\n.zmiti-company-main-ui .zmiti-add-form .zmiti-add-form-item.zmiti-add-btns button[data-v-15c9be30] {\n          margin: 0 20px;\n          padding: 2px 20px;\n}\n.zmiti-company-main-ui .zmiti-add-form .zmiti-add-form-item input[data-v-15c9be30] {\n        padding-left: 6px;\n        height: 32px;\n        width: 70%;\n        border: 1px solid #d8d8d8;\n        outline: none;\n}\n.ivu-icon-ios-help-circle[data-v-15c9be30] {\n  left: 25px;\n}\n.ivu-radio-inner[data-v-15c9be30]:after {\n  border-radius: 10px !important;\n}\n',""])},49:function(a,i,t){"use strict";t.r(i);var n=t(3),e=t(61),o=n.a.adminActions,r=(o=n.a.companyActions,{props:["obserable"],name:"zmitiindex",data(){return{tabIndex:[0,-1],showAvatarModal:!1,visible:!1,avatarList:["&#xe6a5;","&#xe6a4;","&#xe6a3;","&#xe6a2;","&#xe6a0;"],roleList:[],imgs:window.imgs,isLoading:!1,showDetail:!1,showDetailPage:!1,currentClassId:-1,adminuserId:"",currentUserid:"",formCompany:{isover:0,avatar:"&#xe6a4;"},address:"",showPass:!1,showMap:!1,viewH:window.innerHeight,viewW:window.innerWidth,companyList:[],groupList:[],hideMenu:!1,roleCol:[{title:"产品名称",key:"productname",align:"center"},{title:"访问权限",key:"role",align:"center",render:(a,i)=>(console.log(i.row),a("Checkbox",{props:{checked:!0,value:1===i.row.authstatus},on:{"on-change":a=>{n.a.ajax({url:window.config.baseUrl+"admin/setuserauth",data:{setuserid:this.currentUserid,productids:i.row.productid,isdel:1===i.row.authstatus?1:2}})}}},"访问权限"))}],columns:[{title:"单位名称",key:"companyname",align:"center"},{title:"单位地址",key:"companyaddress",align:"center",width:200},{title:"联系电话",key:"companyphone",align:"center"},{title:"状态",key:"isover",align:"center",render:(a,i)=>a("div",{},0===i.row.isover?"正常使用":1===i.row.isover?"已禁用":"已删除")},{title:"操作",key:"action",align:"center",width:200,render:(a,i)=>a("div",[a("span",{style:{border:"none",fontSize:"12px",cursor:"pointer",color:"#06C"},on:{click:()=>{this.visible=!0;var a=this;this.currentUserid=i.row.userid,n.a.ajax({url:window.config.baseUrl+"admin/getuserauth",data:{setuserid:i.row.userid},success(i){a.roleList=i.list,console.log(i)}})}}},"权限"),a("span",{style:{marginLeft:"10px",border:"none",fontSize:"12px",cursor:"pointer",color:"#06C"},on:{click:()=>{this.visible=!0;var a=this;this.currentUserid=i.row.userid,n.a.ajax({url:window.config.baseUrl+"admin/getuserauth",data:{setuserid:i.row.userid},success(i){a.roleList=i.list,console.log(i)}})}}},"用户"),a("span",{props:{type:"primary",size:"small"},style:{margin:"2px 10px",border:"none",fontSize:"12px",cursor:"pointer",color:"#06C"},on:{click:()=>{this.showDetail=!0,this.formCompany=i.row}}},"编辑"),a("Poptip",{props:{confirm:!0,title:"确定要删除吗？"},on:{"on-ok":()=>{this.delAdmin(i.row.adminuserid)}}},[a("span",{props:{type:"error",size:"small"},style:{cursor:"pointer",color:"#06C"},on:{click:()=>{}}},"删除")])])}],formcompany:{pdfurl:"",longitude:"116.585856",latitude:"40.364989"},directoryList:{},condition:{page_index:0,page_size:10},userinfo:{}}},components:{Avatar:e.a},beforeCreate(){},mounted(){window.s=this,this.userinfo=n.a.getAdminUserInfo(),this.getCompanyList()},watch:{showDetail(a){a?this.showDetailPage=!0:setTimeout(()=>{this.showDetailPage=!1},310)}},methods:{getAvatar(a){this.formCompany.avatar=a},initPassword(){var{$Message:a}=this;n.a.adminAjax({data:{action:o.modifyAdminPassword.action,adminuserid:this.formCompany.adminuserid,adminpwd:window.config.defaultPass},success(i){a[0===i.getret?"success":"error"](i.msg),i.getret}})},addAdmin(){this.showDetail=!0,this.adminuserId="",this.formCompany={isover:0,avatar:"&#xe6a4;"}},delAdmin(a){var i=this;n.a.adminAjax({remark:"delAdmin",data:{action:o.delAdmin.action,adminuserid:a},success(a){i.$Message[0===a.getret?"success":"error"](a.msg),0===a.getret&&i.getCompanyList()}})},getCompanyList(){var a=this;if("function"==typeof window.Promise){var i=new Promise((i,t)=>{n.a.adminAjax({remark:"getCompanyList",data:{action:o.getCompanyList.action,condition:this.condition},success(t){0===t.getret&&(a.companyList=t.list,i())}})});Promise.all([i]).then(()=>{a.companyList.map((i,t)=>{a.groupList.map((a,t)=>{i.groupid==a.id&&(i.groupname=a.groupname)})}),a.companyList=a.companyList.concat([])})}else console.log("当前浏览器不支持Promise")},adminAction(){var a=this,i=this.formCompany.companyid,t=i?o.editCompany.action:o.addCompany.action;n.a.adminAjax({remark:i?"editAdminUser":"addAdminUser",data:{action:t,info:this.formCompany},success(i){a.$Message[0===i.getret?"success":"error"](i.msg),0===i.getret&&(a.showDetail=!1,a.getCompanyList())}})}}}),s=function(){var a=this,i=a.$createElement,t=a._self._c||i;return t("div",{staticClass:"zmiti-company-main-ui"},[t("div",{staticClass:"zmiti-list-main"},[t("header",{staticClass:"zmiti-tab-header"},[t("div",[a._v("单位管理")]),a._v(" "),t("div",[t("Button",{attrs:{type:"primary"},on:{click:a.addAdmin}},[a._v("新增单位")])],1)]),a._v(" "),a._m(0),a._v(" "),t("div",{staticClass:"zmiti-company-main zmiti-scroll ",style:{height:a.viewH-180+"px"}},[t("div",{staticClass:"zmiti-company-table",class:{active:a.showDetail}},[t("Table",{attrs:{data:a.companyList,columns:a.columns}})],1)]),a._v(" "),(a.showDetail,a._e())]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:a.showDetailPage,expression:"showDetailPage"}],staticClass:"lt-full"},[t("div",{staticClass:"zmiti-left-pannel",style:{height:a.viewH+"px"},on:{click:function(i){a.showDetail=!1}}}),a._v(" "),t("transition",{attrs:{name:"detail"}},[a.showDetail?t("section",{staticClass:"zmiti-add-form zmiti-scroll"},[t("header",{staticClass:"zmiti-add-header"},[t("img",{attrs:{src:a.imgs.back,alt:""},on:{click:function(i){a.showDetail=!1}}}),a._v(" "),t("span",[a._v("基础信息")])]),a._v(" "),t("div",{staticClass:"zmiti-company-avatar",on:{click:function(i){a.showAvatarModal=!0}}},[t("span",{staticClass:"zmt_iconfont",domProps:{innerHTML:a._s(a.formCompany.logourl)}}),a._v(" "),t("label",[a._v("更换头像")])]),a._v(" "),t("Form",{staticClass:"zmiti-add-form-C",attrs:{model:a.formCompany,"label-width":120}},[t("FormItem",{attrs:{label:"单位名称："}},[t("Input",{attrs:{placeholder:"单位名称："},model:{value:a.formCompany.companyname,callback:function(i){a.$set(a.formCompany,"companyname",i)},expression:"formCompany.companyname"}})],1),a._v(" "),t("FormItem",{attrs:{label:"单位地址："}},[t("Input",{attrs:{placeholder:"单位地址："},model:{value:a.formCompany.companyaddress,callback:function(i){a.$set(a.formCompany,"companyaddress",i)},expression:"formCompany.companyaddress"}})],1),a._v(" "),t("FormItem",{attrs:{label:"纳税识别号："}},[t("Input",{attrs:{placeholder:"纳税识别号："},model:{value:a.formCompany.companycode,callback:function(i){a.$set(a.formCompany,"companycode",i)},expression:"formCompany.companycode"}})],1),a._v(" "),t("FormItem",{attrs:{label:"单位电话："}},[t("Input",{attrs:{placeholder:"单位电话："},model:{value:a.formCompany.companyphone,callback:function(i){a.$set(a.formCompany,"companyphone",i)},expression:"formCompany.companyphone"}})],1),a._v(" "),t("FormItem",{attrs:{label:"开户行："}},[t("Input",{attrs:{placeholder:"开户行："},model:{value:a.formCompany.bank,callback:function(i){a.$set(a.formCompany,"bank",i)},expression:"formCompany.bank"}})],1),a._v(" "),t("FormItem",{attrs:{label:"开户行账号："}},[t("Input",{attrs:{placeholder:"开户行账号："},model:{value:a.formCompany.bankcode,callback:function(i){a.$set(a.formCompany,"bankcode",i)},expression:"formCompany.bankcode"}})],1),a._v(" "),t("FormItem",{attrs:{label:"单位合同扫描件："}},[t("Input",{attrs:{placeholder:"单位合同扫描件："},model:{value:a.formCompany.contract,callback:function(i){a.$set(a.formCompany,"contract",i)},expression:"formCompany.contract"}})],1),a._v(" "),t("FormItem",{attrs:{label:"营业执照："}},[t("Input",{attrs:{placeholder:"营业执照："},model:{value:a.formCompany.businesslicensepath,callback:function(i){a.$set(a.formCompany,"businesslicensepath",i)},expression:"formCompany.businesslicensepath"}})],1),a._v(" "),t("FormItem",{attrs:{label:"标识："}},[t("RadioGroup",{model:{value:a.formCompany.isover,callback:function(i){a.$set(a.formCompany,"isover",i)},expression:"formCompany.isover"}},[t("Radio",{attrs:{value:0,label:0}},[a._v("禁用")]),a._v(" "),t("Radio",{attrs:{value:1,label:1}},[a._v("正常使用")])],1)],1),a._v(" "),t("FormItem",{attrs:{label:"备注："}},[t("Input",{attrs:{placeholder:"备注："},model:{value:a.formCompany.comment,callback:function(i){a.$set(a.formCompany,"comment",i)},expression:"formCompany.comment"}})],1),a._v(" "),t("FormItem",{attrs:{label:"配置："}},[t("Input",{attrs:{placeholder:"配置："},model:{value:a.formCompany.config,callback:function(i){a.$set(a.formCompany,"config",i)},expression:"formCompany.config"}})],1)],1),a._v(" "),t("div",{staticClass:"zmiti-add-form-item zmiti-add-btns"},[t("Button",{attrs:{size:"large",type:"primary"},on:{click:a.adminAction}},[a._v(a._s(a.adminuserId?"保存":"确定"))])],1)],1):a._e()])],1),a._v(" "),t("Modal",{attrs:{title:"权限设置"},model:{value:a.visible,callback:function(i){a.visible=i},expression:"visible"}},[t("Table",{attrs:{data:a.roleList,columns:a.roleCol}})],1),a._v(" "),t("Avatar",{attrs:{avatar:a.formCompany.avatar},on:{getAvatar:a.getAvatar},model:{value:a.showAvatarModal,callback:function(i){a.showAvatarModal=i},expression:"showAvatarModal"}})],1)};s._withStripped=!0;var m=t(7),l=!1;var c=function(a){l||t(113)},d=Object(m.a)(r,s,[function(){var a=this.$createElement,i=this._self._c||a;return i("section",{staticClass:"zmiti-list-where"},[this._v("\n\t\t\t单位编号 "),i("input",{attrs:{type:"text"}})])}],!1,c,"data-v-15c9be30",null);d.options.__file="admin\\workorder\\index.vue";i.default=d.exports},56:function(a,i,t){var n=t(57);"string"==typeof n&&(n=[[a.i,n,""]]),n.locals&&(a.exports=n.locals);(0,t(6).default)("a75f7b58",n,!1,{})},57:function(a,i,t){(a.exports=t(2)()).push([a.i,"/*.ant-btn:focus, .ant-btn:hover,.ant-input:focus, .ant-input:hover {\r\n    background-color: #fff;\r\n    border-color: #bf1616;\r\n    box-shadow: 0 0 0 2px rgba(191, 22, 22, 0.1);\r\n}*/\n.zmiti-avatar-list[data-v-e6b7be7c] {\n  display: flex;\n  display: -webkit-flex;\n  flex-flow: row;\n}\n.zmiti-avatar-list span[data-v-e6b7be7c] {\n    font-size: 40px;\n    margin-right: 20px;\n    cursor: pointer;\n}\n.zmiti-avatar-list span.active[data-v-e6b7be7c] {\n      color: #3390ff;\n}\n",""])},61:function(a,i,t){"use strict";var n={props:{value:{type:Boolean},avatar:{type:String,default:""}},watch:{value(a){a||(this.chooseAvatar(),this.show=!1),this.show=a}},methods:{chooseAvatar(){this.$emit("getAvatar",this.avatarList[this.index]),this.$emit("input",!1)},closeModal(a){a||(this.chooseAvatar(),this.show=!1),this.show=a}},data:()=>({show:!0,index:-1,avatarList:["&#xe6a5;","&#xe6a4;","&#xe6a3;","&#xe6a2;","&#xe6a0;"]}),mounted(){this.avatarList.forEach((a,i)=>{a===this.avatar&&(this.index=i)})}},e=function(){var a=this,i=a.$createElement,t=a._self._c||i;return a.value?t("div",[t("Modal",{attrs:{title:"更换头像",transfer:!1,"mask-closable":!1},on:{"on-visible-change":a.closeModal},model:{value:a.show,callback:function(i){a.show=i},expression:"show"}},[t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary"},on:{click:a.chooseAvatar}},[a._v("确定")])],1),a._v(" "),t("div",{staticClass:"zmiti-avatar-list"},a._l(a.avatarList,function(i,n){return t("span",{key:n,staticClass:"zmt_iconfont",class:{active:a.index===n},domProps:{innerHTML:a._s(i)},on:{click:function(i){a.index=n}}})}),0)])],1):a._e()};e._withStripped=!0;var o=t(7),r=!1;var s=function(a){r||t(56)},m=Object(o.a)(n,e,[],!1,s,"data-v-e6b7be7c",null);m.options.__file="common\\avatar\\index.vue";i.a=m.exports}}]);