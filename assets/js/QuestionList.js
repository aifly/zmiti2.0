(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{708:function(i,t,o){var s=o(709);"string"==typeof s&&(s=[[i.i,s,""]]),s.locals&&(i.exports=s.locals);(0,o(6).default)("761620cf",s,!1,{})},709:function(i,t,o){(i.exports=o(4)()).push([i.i,"\n.zmiti-question-main-ui[data-v-7590ba7f]{background:#f2f2f2;box-sizing:border-box;height:100%;width:99%;margin:0 auto\n}\n.zmiti-question-main-ui .zmiti-list-main[data-v-7590ba7f]{box-sizing:border-box;background:#fff;margin:0 auto\n}\n.zmiti-question-main-ui .zmiti-submit-main[data-v-7590ba7f]{margin-top:10px;flex:5;-webkit-flex:5;width:100%\n}\n.zmiti-question-main-ui .zmiti-submit-main>div[data-v-7590ba7f]{-webkit-transition:.3s;transition:.3s\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-form[data-v-7590ba7f]{margin:20px\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-submit-main[data-v-7590ba7f]{overflow:auto\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-add-form-C[data-v-7590ba7f]{margin:10px auto\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-add-form-C .upload-img[data-v-7590ba7f]{display:flex;display:-webkit-flex;flex-flow:row;align-items:flex-end\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-add-form-C .upload-img img[data-v-7590ba7f]{width:auto;height:100px;margin-right:10px\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-btn[data-v-7590ba7f]{margin:10px 20px;text-align:center;height:60px;line-height:60px;background-color:#fff;border:1px dashed #ccc;cursor:pointer\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-btn i[data-v-7590ba7f]{margin-right:5px\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-options[data-v-7590ba7f]{margin-bottom:5px\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-options .zmiti-options-index[data-v-7590ba7f]{width:30px;text-align:right;font-size:16px\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-options .zmiti-options-item[data-v-7590ba7f]{width:300px;margin:0 10px\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-options .zmiti-options-item-imgurl[data-v-7590ba7f]{margin-left:10px\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-options .zmiti-options-item-imgurl img[data-v-7590ba7f]{height:100px;width:150px\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-options .ivu-icon[data-v-7590ba7f]{cursor:pointer\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-items[data-v-7590ba7f]{border:1px solid #cccccc;margin:10px 20px;background-color:#ffffff;padding:0 20px;box-sizing:border-box\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-items .zmiti-suboption-img[data-v-7590ba7f]{border:1px solid #e8eaec\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-items .zmiti-question-ulist[data-v-7590ba7f]{flex:1;-webkit-flex:1;-moz-flex:1\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-items .zmiti-question-ulist ul[data-v-7590ba7f]{display:flex;display:-webkit-flex;flex-flow:row;flex-wrap:wrap\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-items .zmiti-question-ulist ul li[data-v-7590ba7f]{width:200px;margin-bottom:10px;margin-right:20px\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-items .zmiti-question-ulist ul li img[data-v-7590ba7f]{width:100px;height:75px\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-items .zmiti-question-ulist ul li .zmiti-question-suboption[data-v-7590ba7f]{display:flex;display:-webkit-flex;flex-flow:row\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-items .zmiti-question-ulist ul li .zmiti-question-suboption .zmiti-question-suboption-txt[data-v-7590ba7f]{flex:1;-webkit-flex:1;-moz-flex:1;border:1px solid #e8eaec;padding:0 0 0 5px;margin-left:-1px\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-items .zmiti-question-inner[data-v-7590ba7f]{border-top:1px solid #cccccc;padding-top:12px;padding-bottom:10px\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-h1[data-v-7590ba7f]{display:flex;display:-webkit-flex;flex-flow:row;height:60px;line-height:60px\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-h1 .zmiti-h1-txt[data-v-7590ba7f]{font-size:16px\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-h1 .zmiti-block-oper[data-v-7590ba7f]{width:90px;color:#2d8cf0;text-align:center;margin-left:auto\n}\n.zmiti-question-main-ui .zmiti-submit-main .zmiti-question-h1 .zmiti-block-oper span[data-v-7590ba7f]{cursor:pointer;margin-left:10px\n}\n",""])},710:function(i,t,o){var s=o(711);"string"==typeof s&&(s=[[i.i,s,""]]),s.locals&&(i.exports=s.locals);(0,o(6).default)("6aa5031a",s,!1,{})},711:function(i,t,o){(i.exports=o(4)()).push([i.i,"\n.zmiti-question-options .ivu-form-item-content{display:flex;display:-webkit-flex;align-items:center\n}\n",""])},733:function(i,t,o){"use strict";o.r(t);var s=o(64),n=o(2),e={props:["obserable"],name:"zmitiindex",data:()=>({loading:!1,show:!1,showPicture:!1,currentChoosePicture:{},currentOptionIndex:0,currentQuestion:{},showSubimg:!1,showForm:!1,showFormOptions:!0,columntitle:"问卷调查问题列表",imgs:window.imgs,viewH:window.innerHeight,productid:0,inquireid:void 0,inquireActions:n.a.inquireActions,company:n.a.getCurrentCompanyId(),formObj:{},questionForm:{questionList:[]}}),components:{ResourceList:s.a},mounted(){this.productid=this.$route.params.productid,this.inquireid=this.$route.params.id,this.columntitle=this.$route.params.title,this.getQuestionList()},methods:{goback(){window.history.go(-1)},checkOptions(i,t,o){let s=i.fullField.split(".")[1],n=this.questionForm.questionList[s].questiontype;[0,1].includes(n)&&""==t?o(new Error("请输入选项值")):o()},typeChange(i,t){[0,1].includes(i)&&t.option_list.length<=0&&t.option_list.push({optionsid:0,options:"",optionsurl:"",sort:1})},save(){this.questionForm.questionList.length<=0&&(this.$Message.error("请添加问题"),retrun),this.$refs.questionForm.validate(i=>{if(i){let i=this.inquireActions.editQuestion.action,t=this,o=[];t.questionForm.questionList.forEach(i=>{[2,3].includes(i.questiontype)&&(i.option_list=[]),o.push(i)}),t.loading=!0,n.a.ajax({remark:"editQuestion",data:{action:i,bi:{productid:t.productid,companyid:t.company.companyid,inquireid:t.inquireid},list:o},error(){t.loading=!1},success(i){t.loading=!1,t.$Message[0===i.getret?"success":"error"](i.msg||i.getmsg),0===i.getret&&t.getQuestionList()}})}})},getQuestionList(){let i=this;n.a.ajax({remark:"getQuestionList",data:{action:this.inquireActions.getQuestionList.action,condition:{page_index:0,page_size:1e3,companyid:this.company.companyid,inquireid:Number(this.inquireid),productid:Number(this.productid)}},success(t){let o=[];0===t.getret?t.list.forEach(i=>{let t=[];i.options.forEach(i=>{let o={optionsid:i.optionsid,options:i.options,optionsurl:i.optionsurl,sort:i.sort};t.push(o)});let s={questionid:i.questionid,status:!1,questionlabe:i.questionlabe,questiontype:i.questiontype,sort:i.sort,questionurl:i.questionurl,option_list:t};o.push(s)}):i.$Message.error(t.msg||t.getmsg),i.questionForm.questionList=o}})},showAddQuestion(){let i=this.questionForm.questionList.length;this.formObj={questionid:0,status:!0,questionlabe:"",questiontype:0,sort:i>0?this.questionForm.questionList[i-1].sort+1:1,questionurl:"",option_list:[{optionsid:0,options:"",optionsurl:"",sort:0}]},this.questionForm.questionList.push(this.formObj)},editQuestion(i,t){this.show=!this.show,this.questionForm.questionList[t].status=this.show},removeQuestion(i,t){if(t.questionid&&0!=t.questionid){let o=this;n.a.ajax({remark:"delQuestion",data:{action:this.inquireActions.delQuestion.action,bi:{productid:o.productid,companyid:o.company.companyid},list:[t.questionid]},success(t){0!==t.getret&&o.$Message.error(t.msg||t.getmsg),0===t.getret&&o.questionForm.questionList.splice(i,1)}})}else this.questionForm.questionList.splice(i,1)},removeOptions(i,t,o){if(i&&0!=i){let s=this;n.a.ajax({remark:"delOptions",data:{action:this.inquireActions.delOptions.action,info:{optionsid:i,productid:s.productid,companyid:s.company.companyid}},success(i){0!==i.getret&&s.$Message.error(i.msg||i.getmsg),0===i.getret&&s.questionForm.questionList[t].option_list.splice(o,1)}})}else this.questionForm.questionList[t].option_list.splice(o,1)},addOptions(i,t){this.questionForm.questionList[i].option_list.push({optionsid:0,options:"",optionsurl:"",sort:t+1})},chooseQuestionImg(i){this.showPicture=!0,this.currentQuestion=i},onFinishPicture(i){this.currentChoosePicture=i},choosePicture(){this.showPicture=!1,this.currentQuestion.questionurl=this.currentChoosePicture.filepath},openUploadImg(i,t){this.currentQuestion=i,this.currentOptionIndex=t,this.showSubimg=!0},onFinishSubimg(i){this.currentChooseSubimg=i},chooseSubimg(){this.showSubimg=!1;let i=this.currentOptionIndex,t=this.currentChooseSubimg.filepath;this.currentQuestion.option_list[i].optionsurl=t}}},a=function(){var i=this,t=i.$createElement,o=i._self._c||t;return o("div",{staticClass:"zmiti-question-main-ui"},[o("div",{staticClass:"zmiti-list-main"},[o("div",{staticClass:"zmiti-partynews-table lt-full"},[o("header",{staticClass:"zmiti-tab-header"},[o("div",[o("span",[i._v(i._s(i.columntitle))])]),i._v(" "),o("div",[o("Button",{attrs:{loading:i.loading,type:"primary"},on:{click:function(t){return i.save()}}},[i._v("提交")]),i._v(" "),o("Button",{on:{click:function(t){return i.goback()}}},[i._v("返回")])],1)]),i._v(" "),o("div",{staticClass:"zmiti-submit-main zmiti-scroll",style:{height:i.viewH-110+"px"}},[o("Form",{ref:"questionForm",staticClass:"zmiti-add-form-C",attrs:{model:i.questionForm,"label-width":80}},i._l(i.questionForm.questionList,(function(t,s){return o("div",{key:s,staticClass:"zmiti-question-items"},[o("div",{staticClass:"zmiti-question-h1"},[o("div",{staticClass:"zmiti-h1-txt"},[i._v("问题"+i._s(s+1)+"："+i._s(t.questionlabe))]),i._v(" "),o("div",{staticClass:"zmiti-block-oper"},[o("span",{on:{click:function(o){return i.editQuestion(t,s)}}},[i._v(i._s(1==t.status?"收起":"编辑"))]),i._v(" "),o("Poptip",{attrs:{confirm:"",placement:"left-start",title:"确定要删除这个问题吗?"},on:{"on-ok":function(o){return i.removeQuestion(s,t)}}},[o("span",[i._v("删除")])])],1)]),i._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.status,expression:"item.status"}],staticClass:"zmiti-question-inner"},[o("FormItem",{attrs:{label:"问题：",prop:"questionList."+s+".questionlabe",rules:{required:!0,message:"请输入问题",trigger:"blur"}}},[o("Input",{attrs:{placeholder:"请输入问题"},model:{value:t.questionlabe,callback:function(o){i.$set(t,"questionlabe",o)},expression:"item.questionlabe"}})],1),i._v(" "),o("FormItem",{attrs:{label:"图片："}},[o("div",{staticClass:"upload-img"},[o("img",{attrs:{src:t.questionurl||i.imgs.defaultImg,alt:""}}),i._v(" "),o("Button",{attrs:{icon:"ios-cloud-upload-outline"},on:{click:function(o){return i.chooseQuestionImg(t)}}},[i._v("选择图片")]),i._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.questionurl,expression:"item.questionurl"}],attrs:{type:"hidden"},domProps:{value:t.questionurl},on:{input:function(o){o.target.composing||i.$set(t,"questionurl",o.target.value)}}}),i._v(" "),o("span",{staticStyle:{"margin-left":"20px",color:"red"}},[i._v("图片建议使用宽度大于或等于 750PX的图片")])],1)]),i._v(" "),o("FormItem",{attrs:{label:"类型："}},[o("RadioGroup",{on:{"on-change":function(o){return i.typeChange(t.questiontype,t)}},model:{value:t.questiontype,callback:function(o){i.$set(t,"questiontype",o)},expression:"item.questiontype"}},[o("Radio",{attrs:{label:0}},[i._v("单选")]),i._v(" "),o("Radio",{attrs:{label:1}},[i._v("多选")]),i._v(" "),o("Radio",{attrs:{label:2}},[i._v("单行")]),i._v(" "),o("Radio",{attrs:{label:3}},[i._v("多行")])],1)],1),i._v(" "),i._l(t.option_list,(function(n,e){return o("div",{directives:[{name:"show",rawName:"v-show",value:[0,1].includes(t.questiontype),expression:"[0,1].includes(item.questiontype)"}],key:"options"+s+"-"+e,staticClass:"zmiti-question-options"},[o("FormItem",{attrs:{label:"选项"+(e+1)+"：",prop:"questionList."+s+".option_list."+e+".options",rules:{required:!0,validator:i.checkOptions,trigger:"blur"}}},[n.optionsurl?o("div",{staticClass:"zmiti-options-item-imgurl"},[o("img",{attrs:{src:n.optionsurl,alt:""}}),i._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:n.optionsurl,expression:"opt.optionsurl"}],attrs:{type:"hidden"},domProps:{value:n.optionsurl},on:{input:function(t){t.target.composing||i.$set(n,"optionsurl",t.target.value)}}})]):i._e(),i._v(" "),o("div",{staticClass:"zmiti-options-item"},[o("Input",{staticStyle:{"margin-right":"5px"},attrs:{placeholder:"选项内容"},model:{value:n.options,callback:function(t){i.$set(n,"options",t)},expression:"opt.options"}})],1),i._v(" "),o("div",{staticClass:"zmiti-options-btns"},[o("Icon",{attrs:{type:"ios-image-outline",size:"20"},on:{click:function(o){return i.openUploadImg(t,e)}}}),i._v(" "),t.option_list.length-1===e?o("Icon",{attrs:{type:"ios-add-circle-outline",size:"20"},on:{click:function(t){return i.addOptions(s,e)}}}):i._e(),i._v(" "),o("Icon",{attrs:{type:"ios-remove-circle-outline",size:"20"},on:{click:function(t){return i.removeOptions(n.optionsid,s,e)}}})],1),i._v(" "),o("div",[o("span",{staticStyle:{"margin-left":"20px",color:"red"}},[i._v("图片建议使用1：1尺寸的图")])])])],1)}))],2)])})),0),i._v(" "),o("div",{staticClass:"zmiti-question-btn",on:{click:i.showAddQuestion}},[o("Icon",{attrs:{type:"md-add",size:"20",color:"#ccc"}}),i._v(" "),o("span",[i._v("添加问题")])],1)],1)])]),i._v(" "),o("Modal",{attrs:{title:"资料库",width:"800"},model:{value:i.showPicture,callback:function(t){i.showPicture=t},expression:"showPicture"}},[i.showPicture?o("ResourceList",{attrs:{isAdmin:!1,isDialog:!0},on:{onFinished:i.onFinishPicture}}):i._e(),i._v(" "),o("div",{staticClass:"zmiti-resourcelist-footer",attrs:{slot:"footer"},slot:"footer"},[o("Button",{staticStyle:{width:"100px"},on:{click:function(t){i.showPicture=!1}}},[i._v("取消")]),i._v(" "),o("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:i.choosePicture}},[i._v("确定")])],1)],1),i._v(" "),o("Modal",{attrs:{title:"资料库",width:"800"},model:{value:i.showSubimg,callback:function(t){i.showSubimg=t},expression:"showSubimg"}},[i.showSubimg?o("ResourceList",{attrs:{isAdmin:!1,isDialog:!0},on:{onFinished:i.onFinishSubimg}}):i._e(),i._v(" "),o("div",{staticClass:"zmiti-resourcelist-footer",attrs:{slot:"footer"},slot:"footer"},[o("Button",{staticStyle:{width:"100px"},on:{click:function(t){i.showSubimg=!1}}},[i._v("取消")]),i._v(" "),o("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(t){return i.chooseSubimg(i.currentOptionIndex)}}},[i._v("确定")])],1)],1)],1)};a._withStripped=!0;var u=o(3),r=!1;var m=function(i){r||(o(708),o(710))},l=Object(u.a)(e,a,[],!1,m,"data-v-7590ba7f",null);l.options.__file="components\\inquire\\index\\questionlist.vue";t.default=l.exports}}]);